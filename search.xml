<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>AcWing 100.IncDecåºåˆ—</title>
    <url>/2022/01/07/AcWing-100-IncDec%E5%BA%8F%E5%88%97/</url>
    <content><![CDATA[<h1 id="ç®—æ³•æ€è·¯">ç®—æ³•æ€è·¯</h1>
<p>ç®—æ³•åŸºäºæŸ¥åˆ†æ•°ç»„çš„å‰ç¼€å’Œå³æ˜¯åŸæ•°ç»„çš„æ€æƒ³è¿›è¡Œã€‚</p>
<p>å¯¹äºåœ¨åŸå§‹æ•°ç»„ä¸Š[m, n]åŒºé—´æ¯ä¸ªæ•°å­—+nï¼Œä½“ç°åœ¨å·®åˆ†æ•°ç»„ä¸Šå³ç¬¬mä¸ªæ•°å­—+nåŒæ—¶ç¬¬n+1ä¸ªæ•°å­—-nã€‚</p>
<hr />
<p>æœ¬é¢˜æä¾›çš„åŸºæœ¬æ“ä½œå¯ä»¥ä½¿ç”¨å·®åˆ†è¿›è¡Œè¡¨ç¤ºï¼Œå³æ¯æ¬¡+1æˆ–-1çš„æ“ä½œå¯ä»¥åœ¨å·®åˆ†æ•°ç»„ä¸Šå¯¹ä¸¤ç«¯çš„æ•°å­—è¿›è¡Œæ“ä½œå®ç°ï¼Œå¯¹äºæ•´ä¸ªå·®åˆ†æ•°ç»„å¯ä»¥ç”¨ä¸€ä¸ªæŠ˜çº¿å›¾è¿›è¡Œè¡¨ç¤ºï¼Œå¯ä»¥å‘ç°å½“æ‰€æœ‰çš„æ•°å­—ç»è¿‡è¯¥æ“ä½œåˆ°è¾¾ç›¸åŒå€¼æ‰€éœ€æ­¥éª¤æœ€å°‘çš„è¿‡ç¨‹å¿…ç„¶æ˜¯æ‰€æœ‰æ•°å­—è¾¾åˆ°é‡å çš„åŒºåŸŸå†…ã€‚</p>
<!---more--->
<h1 id="ç®—æ³•å®ç°">ç®—æ³•å®ç°</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[N], n;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> pos = <span class="number">0</span>, neg = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; a[i];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &gt; <span class="number">1</span>; --i) a[i] -= a[i - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] &gt; <span class="number">0</span>) pos += a[i];</span><br><span class="line">        <span class="keyword">else</span> neg -= a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; <span class="built_in">min</span>(pos, neg) + <span class="built_in">abs</span>(pos - neg) &lt;&lt; <span class="string">&#x27;\n&#x27;</span> &lt;&lt; <span class="built_in">abs</span>(pos - neg) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•å­¦ä¹ </tag>
        <tag>AcWing</tag>
        <tag>è´ªå¿ƒ</tag>
        <tag>å·®åˆ†</tag>
      </tags>
  </entry>
  <entry>
    <title>AcWing 105. ä¸ƒå¤•ç¥­</title>
    <url>/2022/01/09/AcWing-105-%E4%B8%83%E5%A4%95%E7%A5%AD/</url>
    <content><![CDATA[<h1 id="ç®—æ³•æ€è·¯">ç®—æ³•æ€è·¯</h1>
<p>è€ƒè™‘åˆ°æœ¬é¢˜çš„å®é™…æ“ä½œæœºåˆ¶ï¼Œè¡Œå†…ç›¸é‚»äº¤æ¢ä¸ä¼šå¯¼è‡´åˆ—åˆ†å¸ƒå˜åŒ–ã€åˆ—å†…äº¤æ¢ä¸ä¼šå¯¼è‡´è¡Œåˆ†å¸ƒå˜åŒ–ï¼Œæ ¹æ®è¿™ç‚¹æˆ‘ä»¬å¯ä»¥å°†æœ¬é¢˜æ‹†åˆ†ä¸ºåˆ†åˆ«å¯¹è¡Œå’Œåˆ—åšå¾ªç¯äº¤æ¢æ“ä½œã€‚</p>
<p>å‡è®¾ä¸€ä¸ªç¯å½¢ç»“æ„<span class="math inline">\([a_1, a_2 ... a_n]\)</span>ï¼Œéœ€è¦å°†å…¶ä¸­æ‰€æœ‰çš„æ•°å­—é€šè¿‡ç›¸é‚»æ•°å­—é—´çš„äº¤æ¢å˜ä¸º<span class="math inline">\(a\)</span>ï¼Œå‡è®¾ä»<span class="math inline">\(a_i \to a_{i + 1}\)</span>ä¼ é€’<span class="math inline">\(x_i\)</span>ä¸ªæ•°å­—(<span class="math inline">\(x_i\)</span>å¯æ­£å¯è´Ÿï¼Œä¸”<span class="math inline">\(a_n\to a_1\)</span>ä¸º<span class="math inline">\(x_n\)</span>)åˆ™æœ‰</p>
<p><span class="math display">\[a_1 + x_n - x_1 = a \\ a_2 + x_1 - x_2 = a \\ ... \\a_n + x_{n - 1} - x_n = a\]</span></p>
<p>æ•´ç†å¾—</p>
<p><span class="math display">\[x_1 - x_n = a_1 - a \\ x_2 - x_1 = a_2 - a \\ ... \\ x_n - x_{n - 1} = a_n - a\]</span></p>
<p>ç”±äºå¸Œæœ›æ±‚å¾—æœ€å°çš„æ“ä½œæ¬¡æ•°ï¼Œå³é¢˜ç›®å¸Œæœ›æ±‚å¾—æœ€å°çš„<span class="math inline">\(|x_1| + |x_2| + ... +|x_n|\)</span>åˆ™æœ‰</p>
<p><span class="math display">\[x_1 = x_1 \\ x_2 = x_1 - (a - a_2) \\ x_3 = x_2 - (a - a_3) = x_1 - (2a - a_2 - a_3) \\ ... \\ x_n = x_{n - 1} - (a - a_n) = ... = x_1 - ((n - 1)a-a_2-a_3 ... -a_n)\]</span></p>
<p>å³æœ€ç»ˆä¸Šé¢çš„å¼å­è¢«è½¬åŒ–ä¸ºäº†<span class="math inline">\(|x_1| + |x_1 - (a-a_2)| ...+|x_1 - [(n - 1)a - a_2 - a_3 ... -a_n]|\)</span>æœ€ç»ˆå˜ä¸ºäº†è´§ä»“é€‰å€é—®é¢˜ã€‚</p>
<!---more--->
<h1 id="ä»£ç å®ç°">ä»£ç å®ç°</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, t;</span><br><span class="line"><span class="keyword">int</span> r[N], c[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">compute</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> avg, <span class="keyword">int</span> cnt)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> buf[N];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= cnt; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        buf[i] = avg - a[i] + buf[i - <span class="number">1</span>]; <span class="comment">// buf[1] = a - a_2 buf[2] = 2a - a_2 - a_3 ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(buf + <span class="number">1</span>, buf + cnt + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> mid = (<span class="number">1</span> + cnt) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        res += <span class="built_in">abs</span>(buf[i] - buf[mid]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; t;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; t; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x, y;</span><br><span class="line">        cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        r[x] ++;</span><br><span class="line">        c[y] ++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> col_res = <span class="number">0</span>, row_res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> col_avg = <span class="number">0</span>, row_avg = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (t % m &amp;&amp; t % n) cout &lt;&lt; <span class="string">&quot;impossible&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (t % m)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;row &quot;</span>;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">compute</span>(r, t / n, n);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (t % n)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;column &quot;</span>;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">compute</span>(c, t / m, m);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;both &quot;</span>;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">compute</span>(r, t / n, n) + <span class="built_in">compute</span>(c, t / m, m);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•å­¦ä¹ </tag>
        <tag>AcWing</tag>
        <tag>æ’åº</tag>
      </tags>
  </entry>
  <entry>
    <title>AcWing 1068. ç¯å½¢çŸ³å­åˆå¹¶</title>
    <url>/2022/01/09/AcWing-1068-%E7%8E%AF%E5%BD%A2%E7%9F%B3%E5%AD%90%E5%90%88%E5%B9%B6/</url>
    <content><![CDATA[<h1 id="ç®—æ³•æ€è·¯">ç®—æ³•æ€è·¯</h1>
<p>å¯¹äºçŸ³å­åˆå¹¶ï¼Œå¯¹äºç¬¬<span class="math inline">\(i\)</span>å’Œç¬¬<span class="math inline">\(i + 1\)</span>ä¸¤å †çŸ³å­è¿›è¡Œåˆå¹¶ï¼Œå°†ä¼šå¾—åˆ°å¾—åˆ†<span class="math inline">\(a[i] + a[i + 1]\)</span>ã€‚</p>
<p>å³å¯ä»¥è€ƒè™‘å¯¹äºç¬¬<span class="math inline">\(1...n\)</span>å·çŸ³å­ï¼Œæœ€åä¸€æ¬¡åˆå¹¶çš„å¾—åˆ†å¿…ç„¶ä¸ºæ‰€æœ‰çŸ³å­æ•°é‡çš„æ€»å’Œï¼Œå³å¯ä»¥é€‰æ‹©ä¸€ä¸ªä¸­é—´ä½ç½®<span class="math inline">\(i\)</span>ï¼Œå³ç¬¬<span class="math inline">\(i\)</span>æ¬¡åˆå¹¶åçš„æ€»å¾—åˆ†ä¸º<span class="math inline">\(sc[1...i] + sc[i + 1...n] + a[1 ... n]\)</span>å³ä¸ºå‰åŠæ®µçš„å¾—åˆ†åŠ ä¸ŠååŠæ®µçš„å¾—åˆ†å†åŠ ä¸Šå½“å‰çŸ³å­æ•°é‡çš„æ€»å’Œã€‚</p>
<p>é’ˆå¯¹æ±‚å’Œé—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘ç›´æ¥æ±‚åŒºé—´å’Œï¼Œå³æœ‰</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">a[i] += a[i - <span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<p>åˆ™å¯¹äºç¬¬<span class="math inline">\(i\)</span>åˆ°ç¬¬<span class="math inline">\(j\)</span>çš„æ€»å’Œä¸º<span class="math inline">\(a[j] - a[i - 1]\)</span>ã€‚</p>
<p>è€Œå¯¹äºåˆ’åˆ†é—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘dpæ•°ç»„çš„å®šä¹‰ï¼Œ<code>dp[i][j]</code>ä¸ºç¬¬<span class="math inline">\(i\)</span>åˆ°ç¬¬<span class="math inline">\(j\)</span>å·çŸ³å­åˆå¹¶çš„å¾—åˆ†ã€‚å¾—åˆ°è½¬ç§»æ–¹ç¨‹</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">dp[i][j] = <span class="built_in">max</span>(dp[i][j], d[i][k] + dp[k + <span class="number">1</span>][j]);</span><br></pre></td></tr></table></figure>
<p>åŒæ—¶å¯¹äºåŒºé—´DPé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®éœ€è¦ä»å°åŒºé—´å‘å¤§åŒºé—´éå†ï¼Œå³<code>for</code>å¾ªç¯éå†çš„è¿‡ç¨‹æ˜¯åˆ†åˆ«éå†<strong>åŒºé—´é•¿åº¦</strong>å’Œ<strong>åŒºé—´å·¦ç«¯ç‚¹</strong>ï¼Œå¹¶ä½¿ç”¨äºŒè€…è®¡ç®—å¾—åˆ°åŒºé—´å³ç«¯ç‚¹ã€‚</p>
<p>å¦å¤–æœ¬é¢˜ä¸­çš„æ•°ç»„ä¸ºä¸€ä¸ªå¾ªç¯æ•°ç»„ï¼Œä¸ºäº†å®ç°å¾ªç¯æ•°ç»„ä¸­çš„åŒºé—´DPï¼Œå¯ä»¥è€ƒè™‘å°†æ•°ç»„é‡å¤ä¸€éå¹¶é™å®šåŒºé—´DPçš„é•¿åº¦æ§åˆ¶åœ¨<code>n</code>ï¼Œå®ç°å¯¹äºç¯å½¢æ•°ç»„çš„å¤„ç†</p>
<p>#ä»£ç å®ç°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">420</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, a[N], dpmx[N][N], dpmn[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; a[i], a[i + n] = a[i];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n &lt;&lt; <span class="number">1</span>; ++i) a[i] += a[i - <span class="number">1</span>];<span class="comment">//è®¡ç®—åŒºé—´å’Œ</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">memset</span>(dpmn, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> dpmn);<span class="comment">//åˆå§‹åŒ–æœ€å°å€¼æ•°ç»„</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> len = <span class="number">1</span>; len &lt;= n; ++len)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">1</span>, r; r = l + len - <span class="number">1</span>, r &lt; n &lt;&lt; <span class="number">1</span>; ++l)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (len == <span class="number">1</span>) dpmx[l][l] = dpmn[l][l] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = l; k &lt; r; ++k)</span><br><span class="line">                &#123;</span><br><span class="line">                    dpmx[l][r] = <span class="built_in">max</span>(dpmx[l][r], dpmx[l][k] + dpmx[k + <span class="number">1</span>][r] + a[r] - a[l - <span class="number">1</span>]);</span><br><span class="line">                    dpmn[l][r] = <span class="built_in">min</span>(dpmn[l][r], dpmn[l][k] + dpmn[k + <span class="number">1</span>][r] + a[r] - a[l - <span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> maxv = <span class="number">-0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">int</span> minv = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">1</span>; l &lt;= n; ++l)</span><br><span class="line">    &#123;</span><br><span class="line">        maxv = <span class="built_in">max</span>(maxv, dpmx[l][l + n - <span class="number">1</span>]);</span><br><span class="line">        minv = <span class="built_in">min</span>(minv, dpmn[l][l + n - <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; minv &lt;&lt; <span class="string">&#x27;\n&#x27;</span> &lt;&lt; maxv;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•å­¦ä¹ </tag>
        <tag>AcWing</tag>
        <tag>åŒºé—´DP</tag>
        <tag>DP</tag>
        <tag>åŒºé—´å’Œ</tag>
      </tags>
  </entry>
  <entry>
    <title>AcWing 1076.è¿·å®«é—®é¢˜</title>
    <url>/2022/01/24/AcWing-1076-%E8%BF%B7%E5%AE%AB%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h1 id="ç®—æ³•æ€è·¯">ç®—æ³•æ€è·¯</h1>
<p>æœ¬é¢˜å®é™…ä¸Šå°±æ˜¯Dijkstraç®—æ³•çš„ä¸€ä¸ªå°æ‰©å±•ï¼Œéœ€è¦åŠ å…¥å¯¹äºè·¯å¾„è®°å½•çš„æ”¯æŒã€‚æ•…å¯ä»¥è€ƒè™‘å¼€è¾Ÿä¸€ä¸ª<code>pre[][]</code>æ•°ç»„ä¿å­˜å½“å‰ç‚¹éœ€è¦èµ°çš„ä¸‹ä¸€æ­¥ï¼Œé€šè¿‡è¿­ä»£å¾—åˆ°ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„è·¯å¾„å³å¯ã€‚</p>
<h1 id="ç®—æ³•å®ç°">ç®—æ³•å®ç°</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1010</span>, M = N * N;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> y second</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PII pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> g[N][N];</span><br><span class="line"><span class="keyword">bool</span> st[N][N];</span><br><span class="line">PII pre[N][N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dx[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> dy[] = &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; g[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    queue&lt;PII&gt; q, tq;</span><br><span class="line">    PII tep = &#123;<span class="number">-1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="built_in">fill</span>(pre[<span class="number">0</span>], pre[<span class="number">0</span>] + n * n, tep);</span><br><span class="line">    </span><br><span class="line">    q.<span class="built_in">push</span>(&#123;n - <span class="number">1</span>, n - <span class="number">1</span>&#125;);</span><br><span class="line">    <span class="comment">//st[n - 1][n - 1] = true;</span></span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> t = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span> (st[t.x][t.y]) <span class="keyword">continue</span>;</span><br><span class="line">        st[t.x][t.y] = <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">//cout &lt;&lt; t.x &lt;&lt; &#x27; &#x27; &lt;&lt; t.y &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> x = t.x + dx[i], y = t.y + dy[i];</span><br><span class="line">            <span class="keyword">if</span> (x &lt; <span class="number">0</span> || y &lt; <span class="number">0</span> || x &gt;= n || y &gt;= n || g[x][y] || st[x][y]) <span class="keyword">continue</span>;</span><br><span class="line">            pre[x][y] = t;</span><br><span class="line">            q.<span class="built_in">push</span>(&#123;x, y&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    PII end = &#123;<span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    cout &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">0</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(end.x != n - <span class="number">1</span> || end.y != n - <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, pre[end.x][end.y].x, pre[end.x][end.y].y);</span><br><span class="line">        <span class="keyword">int</span> x = end.x, y = end.y;</span><br><span class="line">        end.x = pre[x][y].x, end.y = pre[x][y].y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// for (int i = 0; i &lt; n; ++i)</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     for (int j = 0; j &lt; n; ++j)</span></span><br><span class="line">    <span class="comment">//     &#123;</span></span><br><span class="line">    <span class="comment">//         cout &lt;&lt; &#x27;[&#x27; &lt;&lt; pre[i][j].x &lt;&lt; &#x27;,&#x27; &lt;&lt; pre[i][j].y &lt;&lt; &quot;] &quot;;</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">//     cout &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•å­¦ä¹ </tag>
        <tag>AcWing</tag>
        <tag>BFS</tag>
      </tags>
  </entry>
  <entry>
    <title>AcWing 1097.æ± å¡˜è®¡æ•°</title>
    <url>/2022/01/19/AcWing-1097-%E6%B1%A0%E5%A1%98%E8%AE%A1%E6%95%B0/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®æ€è·¯">é¢˜ç›®æ€è·¯</h1>
<p>æœ¬é¢˜ç›®è¾ƒä¸ºç®€å•ï¼Œä½†æ˜¯é¢˜ç›®ç»™å‡ºçš„æ•°æ®è‹¥é‡‡ç”¨é€’å½’è¿›è¡Œå®ç°ä¼šå¯¼è‡´<code>stack overflow</code>ï¼Œæ•…é€‰æ‹©ä½¿ç”¨è¿­ä»£ç®—æ³•å®ç°ã€‚å³é‡‡ç”¨BFSçš„æ€æƒ³è¿›è¡Œè®¡ç®—ï¼Œé€šè¿‡ä¸€ä¸ªé˜Ÿåˆ—å­˜å‚¨å½“å‰å¾…è®¿é—®çš„ç‚¹å¹¶æŒç»­è¿›è¡Œå…¥é˜Ÿå‡ºé˜Ÿæ“ä½œæœ€ç»ˆå®Œæˆæ´ªæ³›ã€‚</p>
<h1 id="å®ç°ä»£ç ">å®ç°ä»£ç </h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> g[N][N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> x[] = &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> y[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-1</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">char</span> t;</span><br><span class="line">            cin &gt;&gt; t;</span><br><span class="line">            <span class="keyword">if</span> (t == <span class="string">&#x27;.&#x27;</span>) g[i][j] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> g[i][j] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    queue&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; visited;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (g[i][j])</span><br><span class="line">            &#123;</span><br><span class="line">                visited.<span class="built_in">push</span>(&#123;i, j&#125;);</span><br><span class="line">                g[i][j] = <span class="number">0</span>;</span><br><span class="line">                cnt ++;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span>(!visited.<span class="built_in">empty</span>())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> ox = visited.<span class="built_in">front</span>().first, oy = visited.<span class="built_in">front</span>().second;</span><br><span class="line">                visited.<span class="built_in">pop</span>();</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">0</span>; s &lt; <span class="number">8</span>; ++s)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">int</span> nx = ox + x[s];</span><br><span class="line">                    <span class="keyword">int</span> ny = oy + y[s];</span><br><span class="line">                    <span class="keyword">if</span> (g[nx][ny]) visited.<span class="built_in">push</span>(&#123;nx, ny&#125;);</span><br><span class="line">                    g[nx][ny] = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•å­¦ä¹ </tag>
        <tag>AcWing</tag>
        <tag>æœç´¢</tag>
      </tags>
  </entry>
  <entry>
    <title>AcWing 1098.åŸå ¡é—®é¢˜</title>
    <url>/2022/01/19/AcWing-1098-%E5%9F%8E%E5%A0%A1%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h1 id="ç®—æ³•æ€è·¯">ç®—æ³•æ€è·¯</h1>
<p>æœ¬é¢˜å®é™…ä¸Šä¸éš¾ï¼Œå’Œ1097è§£æ³•ç›¸åŒï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯æœ¬é¢˜ä½¿ç”¨å¤šä¸ªæ•°å­—ä¹‹å’Œè¡¨ç¤ºæ¯ä¸ªæˆ¿é—´çš„å¢™çš„æƒ…å†µã€‚ä½†æ˜¯æ ¹æ®é¢˜æ„å®é™…ä¸Šå°±æ˜¯ç”¨ä¸€ä¸ªå››ä½äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œç›´æ¥æŒ‰ä½åˆ¤æ–­å°±å¯ä»¥ã€‚</p>
<h1 id="ç®—æ³•å®ç°">ç®—æ³•å®ç°</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">55</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> g[N][N], v[N][N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> x[] = &#123;<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> y[] = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; g[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    queue&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; visited;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>, mxar = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> arr = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (!v[i][j])</span><br><span class="line">            &#123;</span><br><span class="line">                cnt ++;</span><br><span class="line">                visited.<span class="built_in">push</span>(&#123;i, j&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span>(!visited.<span class="built_in">empty</span>())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> ox = visited.<span class="built_in">front</span>().first, oy = visited.<span class="built_in">front</span>().second;</span><br><span class="line">                visited.<span class="built_in">pop</span>();</span><br><span class="line">                <span class="keyword">if</span> (v[ox][oy]) <span class="keyword">continue</span>;</span><br><span class="line">                v[ox][oy] = <span class="number">1</span>;</span><br><span class="line">                arr ++;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">0</span>; s &lt; <span class="number">4</span>; ++s)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">int</span> nx = ox + x[s], ny = oy + y[s];</span><br><span class="line">                    <span class="keyword">if</span> (nx &gt; n || ny &gt; m || nx &lt; <span class="number">1</span> || ny &lt; <span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="keyword">if</span> (!(g[ox][oy] &gt;&gt; s &amp; <span class="number">1</span>))</span><br><span class="line">                    &#123;</span><br><span class="line">                        visited.<span class="built_in">push</span>(&#123;nx, ny&#125;);</span><br><span class="line">                        <span class="comment">//cout &lt;&lt; nx &lt;&lt; &#x27; &#x27; &lt;&lt; ny &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            mxar = <span class="built_in">max</span>(mxar, arr);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; cnt &lt;&lt; <span class="string">&#x27;\n&#x27;</span> &lt;&lt; mxar;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•å­¦ä¹ </tag>
        <tag>AcWing</tag>
        <tag>æœç´¢</tag>
      </tags>
  </entry>
  <entry>
    <title>AcWing 1100.æŠ“ä½é‚£å¤´ç‰›</title>
    <url>/2022/01/24/AcWing-1100-%E6%8A%93%E4%BD%8F%E9%82%A3%E5%A4%B4%E7%89%9B/</url>
    <content><![CDATA[<h1 id="ç®—æ³•æ€è·¯">ç®—æ³•æ€è·¯</h1>
<p>è¿™é“é¢˜æ›´ä¸ºç®€å•ç²—æš´ï¼Œç›¸æ¯”188å’Œ1076çš„äºŒç»´æœç´¢é—®é¢˜ï¼Œæœ¬é¢˜å°†æœç´¢æ”¾åˆ°äº†ä¸€ç»´å±‚é¢ï¼Œå®é™…ä¸Šæ›´åŠ ç®€å•äº†ï¼Œå…·ä½“æ€è·¯åŒdijkstraæ¨¡æ¿</p>
<h1 id="ç®—æ³•å®ç°">ç®—æ³•å®ç°</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, k;</span><br><span class="line"><span class="keyword">int</span> dist[N], st[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    </span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">    q.<span class="built_in">push</span>(n);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> dist);</span><br><span class="line">    dist[n] = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> t = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span> (st[t]) <span class="keyword">continue</span>;</span><br><span class="line">        st[t] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (t - <span class="number">1</span> &gt;= <span class="number">0</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            dist[t - <span class="number">1</span>] = <span class="built_in">min</span>(dist[t - <span class="number">1</span>], dist[t] + <span class="number">1</span>);</span><br><span class="line">            q.<span class="built_in">push</span>(t - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (t + <span class="number">1</span> &lt; N)</span><br><span class="line">        &#123;</span><br><span class="line">            dist[t + <span class="number">1</span>] = <span class="built_in">min</span>(dist[t + <span class="number">1</span>], dist[t] + <span class="number">1</span>);</span><br><span class="line">            q.<span class="built_in">push</span>(t + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (t * <span class="number">2</span> &lt; N)</span><br><span class="line">        &#123;</span><br><span class="line">            dist[t * <span class="number">2</span>] = <span class="built_in">min</span>(dist[t * <span class="number">2</span>], dist[t] + <span class="number">1</span>);</span><br><span class="line">            q.<span class="built_in">push</span>(t * <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; dist[k];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•å­¦ä¹ </tag>
        <tag>AcWing</tag>
        <tag>æœç´¢</tag>
      </tags>
  </entry>
  <entry>
    <title>AcWing 1106.å±±å³°å’Œå±±è°·</title>
    <url>/2022/01/19/AcWing-1106-%E5%B1%B1%E5%B3%B0%E5%92%8C%E5%B1%B1%E8%B0%B7/</url>
    <content><![CDATA[<h1 id="ç®—æ³•æ€è·¯">ç®—æ³•æ€è·¯</h1>
<p>æœ¬é¢˜å®é™…ä¸Šåªæ˜¯åœ¨1097å’Œ1098çš„åŸºç¡€ä¸Šå¢åŠ äº†å°‘é‡çš„é¢å¤–æ“ä½œã€‚å¯¹äºåˆ¤æ–­å±±å³°å±±è°·çš„æ“ä½œåªéœ€è¦åœ¨ç¡®å®šè¿é€šåŸŸçš„åŒæ—¶ç¡®å®šåœ¨è¯¥è¿é€šåŸŸè¾¹ç•Œæ˜¯å¦å­˜åœ¨æ›´é«˜æˆ–æ›´ä½çš„æ ¼å­å†è¿›è¡Œåˆ¤æ–­ã€‚</p>
<h1 id="ä»£ç å®ç°">ä»£ç å®ç°</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> g[N][N], st[N][N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    </span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; g[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    queue&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; q;</span><br><span class="line">    <span class="keyword">int</span> peak = <span class="number">0</span>, vally = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">bool</span> has_higher = <span class="literal">false</span>, has_lower = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">if</span> (!st[i][j])</span><br><span class="line">            &#123;</span><br><span class="line">                q.<span class="built_in">push</span>(&#123;i, j&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">auto</span> t = q.<span class="built_in">front</span>();</span><br><span class="line">                q.<span class="built_in">pop</span>();</span><br><span class="line">                <span class="keyword">if</span> (st[t.first][t.second]) <span class="keyword">continue</span>;</span><br><span class="line">                st[t.first][t.second] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> x = t.first - <span class="number">1</span>; x &lt;= t.first + <span class="number">1</span>; ++x)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> y = t.second - <span class="number">1</span>; y &lt;= t.second + <span class="number">1</span>; ++y)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">if</span> (x &lt; <span class="number">1</span> || y &lt; <span class="number">1</span> || x &gt; n || y &gt; n) <span class="keyword">continue</span>;</span><br><span class="line">                        <span class="keyword">if</span> (g[x][y] &gt; g[t.first][t.second]) has_higher = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span> (g[x][y] &lt; g[t.first][t.second]) has_lower = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">else</span> q.<span class="built_in">push</span>(&#123;x, y&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (!(has_lower &amp;&amp; has_higher) &amp;&amp; (has_higher || has_lower))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (has_higher) vally ++;</span><br><span class="line">                <span class="keyword">if</span> (has_lower) peak ++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (peak || vally)</span><br><span class="line">        cout &lt;&lt; peak &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; vally;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;1 1&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•å­¦ä¹ </tag>
        <tag>AcWing</tag>
        <tag>æœç´¢</tag>
      </tags>
  </entry>
  <entry>
    <title>AcWing 188.æ­¦å£«é£åº¦çš„ç‰›</title>
    <url>/2022/01/24/AcWing-188-%E6%AD%A6%E5%A3%AB%E9%A3%8E%E5%BA%A6%E7%9A%84%E7%89%9B/</url>
    <content><![CDATA[<h1 id="ç®—æ³•æ€è·¯">ç®—æ³•æ€è·¯</h1>
<p>è¿˜æ˜¯ç†Ÿæ‚‰çš„Dijkstraï¼Œä½†æ˜¯è¿™æ¬¡çš„è¡Œä¸ºæ¨¡å¼å˜æˆäº†è±¡æ£‹ä¸­ğŸçš„è¡Œè¿›æ–¹å¼ç½¢äº†ã€‚</p>
<h1 id="ç®—æ³•å®ç°">ç®—æ³•å®ç°</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PII pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> y second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">160</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> g[N][N], n, m, dist[N][N], st[N][N];</span><br><span class="line">PII init, target;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    queue&lt;PII&gt; q;</span><br><span class="line">    q.<span class="built_in">push</span>(init);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> dx[] = &#123;<span class="number">1</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">2</span>, <span class="number">-2</span>, <span class="number">2</span>, <span class="number">-2</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> dy[] = &#123;<span class="number">2</span>, <span class="number">-2</span>, <span class="number">-2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-1</span>, <span class="number">1</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> dist);</span><br><span class="line">    <span class="built_in">memset</span>(st, <span class="number">0</span>, <span class="keyword">sizeof</span> st);</span><br><span class="line">    </span><br><span class="line">    dist[init.x][init.y] = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> t = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span> (st[t.x][t.y]) <span class="keyword">continue</span>;</span><br><span class="line">        st[t.x][t.y] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> x = t.x + dx[i], y = t.y + dy[i];</span><br><span class="line">            <span class="keyword">if</span> (x &lt; <span class="number">0</span> || y &lt; <span class="number">0</span> || x &gt;= n || y &gt;= m || g[x][y]) <span class="keyword">continue</span>;</span><br><span class="line">            dist[x][y] = <span class="built_in">min</span>(dist[x][y], dist[t.x][t.y] + <span class="number">1</span>);</span><br><span class="line">            q.<span class="built_in">push</span>(&#123;x, y&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; m &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">char</span> t;</span><br><span class="line">            cin &gt;&gt; t;</span><br><span class="line">            <span class="keyword">if</span> (t == <span class="string">&#x27;*&#x27;</span>) g[i][j] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">            &#123;</span><br><span class="line">                g[i][j] = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">if</span> (t == <span class="string">&#x27;K&#x27;</span>) init = &#123;i, j&#125;;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (t == <span class="string">&#x27;H&#x27;</span>) target = &#123;i, j&#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">bfs</span>();</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; dist[target.x][target.y];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•å­¦ä¹ </tag>
        <tag>AcWing</tag>
        <tag>æœç´¢</tag>
      </tags>
  </entry>
  <entry>
    <title>AcWing 320.èƒ½é‡é¡¹é“¾</title>
    <url>/2022/01/10/AcWing-320-%E8%83%BD%E9%87%8F%E9%A1%B9%E9%93%BE/</url>
    <content><![CDATA[<h1 id="ç®—æ³•æ€è·¯">ç®—æ³•æ€è·¯</h1>
<p>æœ¬é¢˜æ˜¯ä¸€é“ç»å…¸çš„åŒºé—´DPé—®é¢˜ã€‚</p>
<p>å¯¹äºä¸€ä¸²ç å­<span class="math inline">\((i_1, j_1), (i_2, j_2)...(i_n, j_n)\)</span>å‡è®¾å¯¹å…¶ä¸­ä»»æ„ä¸€ä¸ªåŒºé—´è¿›è¡Œåˆå¹¶ï¼Œä¾‹å¦‚å¯¹<span class="math inline">\((i_k, j_k)...(i_s, j_s)\)</span>è¿™ä¸€æ®µçš„æ‰€æœ‰ç å­è¿›è¡Œåˆå¹¶ï¼Œæœ€åä¸€æ¬¡åˆå¹¶çš„å€¼ï¼ˆé‡Šæ”¾çš„èƒ½é‡ï¼‰å–å†³äºåˆå¹¶çš„é¡ºåºã€‚ä½†æ˜¯åŒæ ·å¯ä»¥è€ƒè™‘å¯¹åˆå¹¶ç‚¹è¿›è¡Œæšä¸¾å¾—åˆ°ç»“æœã€‚</p>
<p>è€ƒè™‘å½“åˆå¹¶åŒºé—´é¦–å°¾ç¡®å®šçš„æƒ…å†µä¸‹ï¼Œè¯¥æ¬¡åˆå¹¶çš„ç»“æœåªä¸å…¶çš„åˆå¹¶çš„ä¸­å¿ƒç‚¹çš„å€¼æœ‰å…³ï¼Œæ•…å¯ä»¥è€ƒè™‘åœ¨åŒºé—´DPçš„è¿‡ç¨‹ä¸­æšä¸¾åˆå¹¶ç‚¹å¾—åˆ°ç»“æœã€‚</p>
<p>è€Œè€ƒè™‘åˆ°æœ¬é¢˜æ¯ä¸ªè¢«åˆå¹¶çš„ç å­å…·æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆå¹¶çš„è¿‡ç¨‹å¯ä»¥è¢«è§†ä½œ<span class="math inline">\(i_k, j_k(i_{k+1}), j_{k + 1} \to i_k, j_{k + 1}\)</span>è€Œä¸­é—´çš„å…ƒç´ å°†ä¼šè¢«ä¸¤è¾¹å…±ç”¨ï¼Œé—®é¢˜å¯ä»¥ä»åˆå¹¶nä¸ªå¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„ç å­è½¬åŒ–ä¸ºåˆå¹¶n+1ä¸ªå¸¦æœ‰ä¸€ä¸ªå‚æ•°çš„çŸ³å­çš„è¿‡ç¨‹ï¼Œä¸”è¢«é€‰ä¸ºåˆ†å‰²ç‚¹çš„çŸ³å­å°†ä¼šè¢«ä¸¤è¾¹å…±ç”¨ã€‚</p>
<!---more--->
<h1 id="ç®—æ³•å®ç°">ç®—æ³•å®ç°</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">220</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[N], dp[N][N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; a[i], a[i + n] = a[i];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> len = <span class="number">1</span>; len &lt;= n + <span class="number">1</span>; ++len)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">1</span>, r; r = l + len - <span class="number">1</span>, r &lt;= n &lt;&lt; <span class="number">1</span>; ++l)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (len == <span class="number">1</span>) dp[l][l] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = l + <span class="number">1</span>; k &lt; r; ++k)</span><br><span class="line">                &#123;</span><br><span class="line">                    dp[l][r] = <span class="built_in">max</span>(dp[l][r], dp[l][k] + dp[k][r] + a[l] * a[r] * a[k]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> maxv = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">1</span>; l &lt;= n; ++l)</span><br><span class="line">    &#123;</span><br><span class="line">        maxv = <span class="built_in">max</span>(maxv, dp[l][l + n]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; maxv;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•å­¦ä¹ </tag>
        <tag>AcWing</tag>
        <tag>åŒºé—´DP</tag>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>AcWing 3580.æ•´æ•°é…å¯¹</title>
    <url>/2021/05/27/AcWing-3580-%E6%95%B4%E6%95%B0%E9%85%8D%E5%AF%B9/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®è¯¦æƒ…">é¢˜ç›®è¯¦æƒ…</h2>
<p>ç»™å®š <span class="math inline">\(n\)</span> ä¸ªæ•´æ•° <span class="math inline">\(a_1,a_2,â€¦,a_n\)</span>, <span class="math inline">\(n\)</span> ä¸ºå¶æ•°ã€‚</p>
<p>ç°åœ¨è¦å°†å®ƒä»¬ä¸¤ä¸¤é…å¯¹ï¼Œç»„æˆ <span class="math inline">\(n2\)</span> ä¸ªæ•°å¯¹ã€‚</p>
<p><span class="math inline">\(ai\)</span> å’Œ <span class="math inline">\(a_j\)</span> èƒ½å¤Ÿé…å¯¹ï¼Œå½“ä¸”ä»…å½“ <span class="math inline">\(a_i=a_j\)</span>ã€‚</p>
<p>æ¯æ¬¡å¢åŠ æ“ä½œå¯ä»¥ä½¿å…¶ä¸­çš„ä»»æ„ä¸€ä¸ªæ•° <span class="math inline">\(a_i\)</span> åŠ ä¸€ã€‚</p>
<p>è¯·é—®ï¼Œè¦ä½¿å¾— <span class="math inline">\(n\)</span> ä¸ªæ•´æ•°èƒ½å¤ŸæˆåŠŸç»„æˆ <span class="math inline">\(\frac{n}{2}\)</span> ä¸ªæ•°å¯¹ï¼Œè‡³å°‘è¦è¿›è¡Œå¤šå°‘æ¬¡å¢åŠ æ“ä½œã€‚</p>
<span id="more"></span>
<h3 id="è¾“å…¥æ ¼å¼">è¾“å…¥æ ¼å¼</h3>
<p>ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•° <span class="math inline">\(n\)</span>ã€‚</p>
<p>ç¬¬äºŒè¡ŒåŒ…å« <span class="math inline">\(n\)</span> ä¸ªæ•´æ•° <span class="math inline">\(a_1,a_2,â€¦,a_n\)</span>ã€‚</p>
<h3 id="è¾“å‡ºæ ¼å¼">è¾“å‡ºæ ¼å¼</h3>
<p>ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ‰€éœ€æœ€å°‘æ“ä½œæ¬¡æ•°</p>
<h3 id="æ•°æ®èŒƒå›´">æ•°æ®èŒƒå›´</h3>
<p><span class="math display">\[1\leq n\leq10^5\]</span>, <span class="math inline">\(1\leq a_i\leq10^4\)</span></p>
<h3 id="è¾“å…¥æ ·ä¾‹1">è¾“å…¥æ ·ä¾‹1</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">6</span><br><span class="line">5 10 2 3 14 5</span><br></pre></td></tr></table></figure>
<h3 id="è¾“å‡ºæ ·ä¾‹1">è¾“å‡ºæ ·ä¾‹1</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">5</span><br></pre></td></tr></table></figure>
<h3 id="è¾“å…¥æ ·ä¾‹2">è¾“å…¥æ ·ä¾‹2</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2</span><br><span class="line">1 100</span><br></pre></td></tr></table></figure>
<h3 id="è¾“å‡ºæ ·ä¾‹2">è¾“å‡ºæ ·ä¾‹2</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">99</span><br></pre></td></tr></table></figure>
<h2 id="é¢˜ç›®æ€è·¯">é¢˜ç›®æ€è·¯</h2>
<p>æœ¬é¢˜ä¸­è€ƒè™‘åˆ°éœ€è¦ä½¿ç”¨æœ€å°çš„ä¿®æ”¹å¯ä»¥å®ç°æ‰€æœ‰çš„æ•´æ•°é…å¯¹ï¼Œæ•…å®é™…ä¸Šæœ€ä¼˜è§£ä¸€å®šæ˜¯å°†æŸä¸ªæ•°å­—<code>a[i]</code>ä¿®æ”¹ä¸ºç¦»ä»–æœ€è¿‘çš„ä¸€ä¸ªæ•°å­—<code>a[j]</code>ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å°†æ’åºå¥½çš„æ‰€æœ‰æ•°å­—æ”¾åˆ°ä¸€ä¸ªæ•°è½´ä¸Šï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„æƒ…å†µ</p>
<figure>
<img src="https://i.loli.net/2021/05/27/a83RVLOoG4hKdYM.png" alt="" /><figcaption>image.png</figcaption>
</figure>
<p>ä¸ºäº†ä½¿å¾—æˆ‘ä»¬çš„ä¿®æ”¹é‡æœ€å°‘ï¼Œå³æ•°è½´ä¸Šæ¯ä¸ªç‚¹æ‰¾åˆ°å’Œä»–é…å¯¹çš„ä¸€ä¸ªç‚¹æ‰€éœ€ç§»åŠ¨çš„æ€»è·ç¦»æœ€å°ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦å°½é‡å°‘åœ°è¶Šè¿‡å…¶ä»–çš„ç‚¹ï¼Œæ•…å¯ä»¥è¯æ˜å¯¹äºæ¯ä¸ª<code>a[i]</code>éƒ½å¿…é¡»æ‰¾å…¶ç›¸é‚»çš„ç‚¹è¿›è¡Œé…å¯¹ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬ä½¿ç”¨è“è‰²çš„æ–¹æ³•è¿›è¡Œé…å¯¹ï¼Œæ­¤æ—¶<code>a[1]</code>å¿…é¡»è¶Šè¿‡<code>a[2]</code>å’Œ<code>a[3]</code>å¯»æ‰¾ä¸å…¶é…å¯¹çš„ç‚¹ï¼Œæ­¤æ—¶å¹¶éæœ€å°ã€‚</p>
<figure>
<img src="/Users/cydia2001/Library/Application%20Support/typora-user-images/image-20210527191959278.png" alt="" /><figcaption>image-20210527191959278</figcaption>
</figure>
<p>åŒæ ·å¯¹äºåé¢çš„æ¯ä¸€ä¸ªç‚¹å‡é€‚ç”¨äºè¯¥ç§æƒ…å†µã€‚</p>
<h2 id="ä»£ç å®ç°">ä»£ç å®ç°</h2>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; a[i];</span><br><span class="line">    <span class="built_in">sort</span>(a + <span class="number">1</span>, a + n + <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i += <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        res += <span class="built_in">abs</span>(a[i + <span class="number">1</span>] - a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•å­¦ä¹ </tag>
        <tag>AcWing</tag>
      </tags>
  </entry>
  <entry>
    <title>AcWing 532. è´§å¸ç³»ç»Ÿ</title>
    <url>/2021/05/22/AcWing-532/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®æè¿°">é¢˜ç›®æè¿°</h2>
<p>åœ¨ç½‘å‹çš„å›½åº¦ä¸­å…±æœ‰<code>n</code>ç§ä¸åŒé¢é¢çš„è´§å¸ï¼Œç¬¬â€‚<code>i</code>â€‚ç§è´§å¸çš„é¢é¢ä¸º<code>a[i]</code>ï¼Œä½ å¯ä»¥å‡è®¾æ¯ä¸€ç§è´§å¸éƒ½æœ‰æ— ç©·å¤šå¼ ã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬æŠŠè´§å¸ç§æ•°ä¸º<code>n</code>ã€é¢é¢æ•°ç»„ä¸º<code>a[1..n]</code>çš„è´§å¸ç³»ç»Ÿè®°ä½œ<code>(n,a)</code> ã€‚â€‚</p>
<p>åœ¨ä¸€ä¸ªå®Œå–„çš„è´§å¸ç³»ç»Ÿä¸­ï¼Œæ¯ä¸€ä¸ªéè´Ÿæ•´æ•°çš„é‡‘é¢â€‚<code>x</code>â€‚éƒ½åº”è¯¥å¯ä»¥è¢«è¡¨ç¤ºå‡ºï¼Œå³å¯¹æ¯ä¸€ä¸ªéè´Ÿæ•´æ•°â€‚<code>x</code>ï¼Œéƒ½å­˜åœ¨â€‚nnâ€‚ä¸ªéè´Ÿæ•´æ•°â€‚<code>t[i]</code>â€‚æ»¡è¶³â€‚<code>a[i]*t[i]</code>â€‚çš„å’Œä¸ºâ€‚<code>x</code>ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨ç½‘å‹çš„å›½åº¦ä¸­ï¼Œè´§å¸ç³»ç»Ÿå¯èƒ½æ˜¯ä¸å®Œå–„çš„ï¼Œå³å¯èƒ½å­˜åœ¨é‡‘é¢â€‚<code>x</code>â€‚ä¸èƒ½è¢«è¯¥è´§å¸ç³»ç»Ÿè¡¨ç¤ºå‡ºã€‚</p>
<p>ä¾‹å¦‚åœ¨è´§å¸ç³»ç»Ÿâ€‚<code>n=3,a=[2,5,9]</code>â€‚ä¸­ï¼Œé‡‘é¢â€‚<code>1,3</code>â€‚å°±æ— æ³•è¢«è¡¨ç¤ºå‡ºæ¥ã€‚â€‚</p>
<p>ä¸¤ä¸ªè´§å¸ç³»ç»Ÿâ€‚<code>(n,a)</code>â€‚å’Œâ€‚<code>(m,b)</code>â€‚æ˜¯ç­‰ä»·çš„ï¼Œå½“ä¸”ä»…å½“å¯¹äºä»»æ„éè´Ÿæ•´æ•°â€‚<code>x</code>ï¼Œå®ƒè¦ä¹ˆå‡å¯ä»¥è¢«ä¸¤ä¸ªè´§å¸ç³»ç»Ÿè¡¨å‡ºï¼Œè¦ä¹ˆä¸èƒ½è¢«å…¶ä¸­ä»»ä½•ä¸€ä¸ªè¡¨å‡ºã€‚â€‚</p>
<p>ç°åœ¨ç½‘å‹ä»¬æ‰“ç®—ç®€åŒ–ä¸€ä¸‹è´§å¸ç³»ç»Ÿã€‚</p>
<p>ä»–ä»¬å¸Œæœ›æ‰¾åˆ°ä¸€ä¸ªè´§å¸ç³»ç»Ÿâ€‚<code>(m,b)</code>ï¼Œæ»¡è¶³â€‚<code>(m,b)</code>â€‚ä¸åŸæ¥çš„è´§å¸ç³»ç»Ÿâ€‚<code>(n,a)</code>â€‚ç­‰ä»·ï¼Œä¸”â€‚<code>m</code>â€‚å°½å¯èƒ½çš„å°ã€‚</p>
<p>ä»–ä»¬å¸Œæœ›ä½ æ¥ååŠ©å®Œæˆè¿™ä¸ªè‰°å·¨çš„ä»»åŠ¡ï¼šæ‰¾åˆ°æœ€å°çš„â€‚<code>m</code>ã€‚</p>
<span id="more"></span>
<h2 id="è¾“å…¥æ ¼å¼">è¾“å…¥æ ¼å¼</h2>
<p>è¾“å…¥æ–‡ä»¶çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°â€‚<code>T</code>ï¼Œè¡¨ç¤ºæ•°æ®çš„ç»„æ•°ã€‚</p>
<p>æ¥ä¸‹æ¥æŒ‰ç…§å¦‚ä¸‹æ ¼å¼åˆ†åˆ«ç»™å‡º <code>T</code> ç»„æ•°æ®ã€‚â€‚</p>
<p>æ¯ç»„æ•°æ®çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ­£æ•´æ•°â€‚<code>n</code>ã€‚</p>
<p>æ¥ä¸‹æ¥ä¸€è¡ŒåŒ…å«â€‚<code>n</code>â€‚ä¸ªç”±ç©ºæ ¼éš”å¼€çš„æ­£æ•´æ•°â€‚<code>a[i]</code>ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼">è¾“å‡ºæ ¼å¼</h2>
<p>è¾“å‡ºæ–‡ä»¶å…±æœ‰ <code>T</code> è¡Œï¼Œå¯¹äºæ¯ç»„æ•°æ®ï¼Œè¾“å‡ºä¸€è¡Œä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºæ‰€æœ‰ä¸â€‚<code>(n,a)</code>â€‚ç­‰ä»·çš„è´§å¸ç³»ç»Ÿâ€‚<code>(m,b)</code>â€‚ä¸­ï¼Œæœ€å°çš„â€‚<code>m</code>ã€‚</p>
<h2 id="æ•°æ®èŒƒå›´">æ•°æ®èŒƒå›´</h2>
<p><span class="math display">\[1 \leq n \leq 100\]</span></p>
<p><span class="math display">\[1 \leq a[i]\leq 25000\]</span></p>
<p><span class="math display">\[1 \leq T \leq 20\]</span></p>
<h2 id="è¾“å…¥æ ·ä¾‹">è¾“å…¥æ ·ä¾‹</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2 </span><br><span class="line">4 </span><br><span class="line">3 19 10 6 </span><br><span class="line">5 </span><br><span class="line">11 29 13 19 17 </span><br></pre></td></tr></table></figure>
<h2 id="è¾“å‡ºæ ·ä¾‹">è¾“å‡ºæ ·ä¾‹</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2</span><br><span class="line">5</span><br></pre></td></tr></table></figure>
<h2 id="é¢˜ç›®æ€è·¯">é¢˜ç›®æ€è·¯</h2>
<p>æœ¬é¢˜ä¸­çš„è´§å¸ç³»ç»Ÿå®é™…ä¸Šå°±æ˜¯åœ¨ç»™å®šçš„ä¸€ä¸²æ•°å­—ä¸­å»æ‰æ‰€æœ‰çš„å¯ä»¥è¢«å…¶ä»–ä»»æ„æ•°å­—è¡¨ç¤ºå‡ºçš„æ•°å­—ã€‚æ•…å¯ä»¥è€ƒè™‘ä½¿ç”¨åŠ¨æ€è§„åˆ’æ±‚å‡ºä½¿ç”¨è¯¥åˆ—æ•°å­—å¯ä»¥è¡¨å‡ºçš„æ‰€æœ‰æ•°å­—çš„æ–¹æ¡ˆæ•°é‡ï¼Œå½“ä¸”ä»…å½“ç»™å‡ºæ•°å­—çš„è¡¨ç¤ºæ–¹æ¡ˆæ•°é‡å¤§äº1çš„æ—¶å€™ï¼Œå³è¯¥æ•°å­—é™¤äº†å¯ä»¥è¢«è‡ªå·±è¡¨å‡ºè¿˜å¯ä»¥è¢«å…¶ä»–æ•°å­—ç»„åˆè¡¨å‡ºçš„æ—¶å€™å³å¯ä»¥å»æ‰ã€‚</p>
<p>æ ¹æ®ä»¥ä¸Šæ€è·¯è¯¥é¢˜å°†ä¼šé€€åŒ–ä¸ºä¸€ä¸ªå®Œå…¨èƒŒåŒ…ç»„åˆé—®é¢˜ï¼Œä»£ç å®ç°å¦‚ä¸‹</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">25010</span>, CNT = <span class="number">101</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> T, n;</span><br><span class="line"><span class="keyword">int</span> a[CNT];<span class="keyword">long</span> <span class="keyword">long</span> f[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span>(T--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fill</span>(f, f + N, <span class="number">0</span>);</span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        cin &gt;&gt; n;</span><br><span class="line">        <span class="keyword">int</span> mx = <span class="number">0</span>, res = n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; a[i]; mx = <span class="built_in">max</span>(a[i], mx);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = a[i]; j &lt;= mx; ++j) f[j] += f[j - a[i]];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (f[a[i]] &gt; <span class="number">1</span>) res--;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•å­¦ä¹ </tag>
        <tag>AcWing</tag>
      </tags>
  </entry>
  <entry>
    <title>AcWing 91.æœ€çŸ­Hamiltonè·¯å¾„</title>
    <url>/2022/01/07/AcWing-91-%E6%9C%80%E7%9F%ADHamilton%E8%B7%AF%E5%BE%84/</url>
    <content><![CDATA[<h1 id="ç®—æ³•é€»è¾‘">ç®—æ³•é€»è¾‘</h1>
<p>æœ¬é¢˜é‡‡ç”¨çŠ¶æ€å‹ç¼©DPæ–¹å¼å®ç°ã€‚</p>
<p>å®šä¹‰çŠ¶æ€<code>i</code>ä¸ºä¸€ä¸ªäºŒè¿›åˆ¶ä¸²ï¼Œå…¶ä¸­1ä»£è¡¨å·²è®¿é—®çš„ç‚¹ï¼Œ0ä»£è¡¨æœªè®¿é—®çš„ç‚¹ã€‚DPæ•°ç»„å®šä¹‰ä¸º å½“å‰çŠ¶æ€*å½“å‰æ­£åœ¨è®¿é—®çš„ç‚¹ã€‚</p>
<span id="more"></span>
<h1 id="ä»£ç å®ç°">ä»£ç å®ç°</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">22</span>, M = <span class="number">1</span> &lt;&lt; <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> g[N][N], dp[M][N];</span><br><span class="line"><span class="keyword">int</span> m, n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">fill</span>(dp[<span class="number">0</span>], dp[<span class="number">0</span>] + M * N, <span class="number">0x3f3f3f3f</span>);</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">0</span>; <span class="comment">// initial_data</span></span><br><span class="line">    </span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; g[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// read graph</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="number">1</span> &lt;&lt; n); ++i) <span class="comment">// for each status i</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;&gt; j &amp; <span class="number">1</span>) <span class="comment">// arrived j</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; n; ++k)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> ((i - (<span class="number">1</span> &lt;&lt; j)) &gt;&gt; k &amp; <span class="number">1</span>) <span class="comment">// arrived k but not arrived j</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        dp[i][j] = <span class="built_in">min</span>(dp[i][j], dp[i - (<span class="number">1</span> &lt;&lt; j)][k] + g[j][k]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; dp[(<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>][n - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•å­¦ä¹ </tag>
        <tag>AcWing</tag>
        <tag>DP</tag>
        <tag>çŠ¶æ€å‹ç¼©DP</tag>
      </tags>
  </entry>
  <entry>
    <title>KMPç®—æ³•</title>
    <url>/2021/06/30/KMP%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<h2 id="ç®—æ³•ç®€ä»‹">ç®—æ³•ç®€ä»‹</h2>
<p>KMPç®—æ³•è§£å†³çš„é—®é¢˜ä¸»è¦åœ¨äºå¦‚ä½•å®ç°åœ¨ä¸€ä¸ªè¾ƒé•¿çš„å­—ç¬¦ä¸²ä¸­åŒ¹é…å¾—åˆ°ä¸€ä¸ªè¾ƒçŸ­çš„å­—ç¬¦ä¸²ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“å¯¹äºå­ä¸²åŒ¹é…çš„é—®é¢˜ï¼Œå¸¸ç”¨çš„æš´åŠ›è§£æ³•æ˜¯ä¸æ–­æšä¸¾èµ·ç‚¹ï¼Œå¹¶åå¤éå†å­—ç¬¦ä¸²ä»¥ç¡®å®šæ˜¯å¦åŒ¹é…ï¼Œè€ŒKMPç®—æ³•åˆ™å¯ä»¥ç®€åŒ–è¿™ä¸€ä¸ªè¿‡ç¨‹ã€‚è¯¥ç®—æ³•å¯ä»¥è‡ªåŠ¨è·³è¿‡ä¸€äº›å¯èƒ½ä¼šå¯¼è‡´é‡å¤åŒ¹é…çš„å­—ç¬¦ä¸²ä»è€Œå‡å°‘åŒ¹é…çš„æ¬¡æ•°ã€‚</p>
<span id="more"></span>
<h2 id="ç®—æ³•è¯¦è§£">ç®—æ³•è¯¦è§£</h2>
<p>é¦–å…ˆæˆ‘ä»¬å‡è®¾æˆ‘ä»¬å¾…åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯<code>s = abababcafc</code>è€Œå­ä¸²ä¸º<code>p = ababc</code>ï¼Œæ•´ä¸ªåŒ¹é…è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤º</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">abababcafc</span><br><span class="line">ababc</span><br><span class="line">    ^ä¸åŒ¹é…</span><br><span class="line"></span><br><span class="line">abababcafc</span><br><span class="line">  ababc</span><br><span class="line">       ^åŒ¹é…æˆåŠŸ</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥å‘ç°ä¸æš´åŠ›åŒ¹é…ä¸åŒï¼Œå­—ç¬¦ä¸²ç›´æ¥å‘åç§»åŠ¨äº†ä¸¤ä½ç„¶åå®Œæˆäº†åŒ¹é…ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿç¬¬äºŒä¸ªå­—ç¬¦ä¸²å­˜åœ¨è¿™æ ·çš„æ€§è´¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ab|ab|abcafc</span><br><span class="line">^1 ^2</span><br><span class="line">   ab|abc</span><br><span class="line">   ^3</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥å‘ç°åœ¨è¿™ä¸ªä¸²ä¸­1ã€2ã€3ä¸‰ä¸ªå­—ç¬¦ä¸²å‡ç›¸åŒï¼Œå®é™…ä¸Šè¿™é‡Œå°±æ˜¯KMPç§»åŠ¨å­—ç¬¦ä¸²çš„ä¾æ®ï¼Œåœ¨ç¬¬ä¸€æ¬¡åŒ¹é…çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬å‘ç°å­—ç¬¦ä¸²<code>0-1</code>ä½å’Œ<code>2-3</code>ä½ç›¸åŒï¼Œè€Œç¬¬ä¸€æ¬¡åˆæˆåŠŸåŒ¹é…äº†<code>0-3</code>ä½çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥è¯´å®é™…ä¸Šä¸‹ä¸€æ¬¡è¿›è¡ŒåŒ¹é…çš„æ—¶å€™æˆ‘ä»¬çš„<code>0-1</code>ä½å¯ä»¥ç›´æ¥ç§»åŠ¨åˆ°å½“å‰<code>2-3</code>ä½çš„ä½ç½®ä¸Šï¼Œç„¶åä»<code>2</code>ä½é‡æ–°å¼€å§‹åŒ¹é…ï¼Œä»è€Œå‡å°‘äº†åŒ¹é…çš„æ¬¡æ•°ã€‚</p>
<p>è€Œæ­¤æ—¶æˆ‘ä»¬ä¾¿ä¼šé¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•è·å¾—ä¸Šé¢æˆ‘ä»¬éœ€è¦çš„è¿™ç§ç›¸åŒçš„å…³ç³»ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥è€ƒè™‘å®šä¹‰ä¸€ä¸ªæ•°ç»„<code>next[]</code>ï¼Œå‡è®¾<code>next[j]</code>è¡¨ç¤ºä»¥<code>j</code>åœ¨<code>p</code>ä¸²ä¸­ä»¥<code>j</code>ç»“å°¾çš„æ»¡è¶³å…¶<strong>å‰ç¼€</strong>ä¸<strong>åç¼€</strong>ç›¸åŒå­ä¸²ä¸­å‰ç¼€ç»“å°¾çš„<strong>ç´¢å¼•</strong>ï¼Œè€Œåç»­åŒ¹é…æ—¶çš„è·³è½¬æ“ä½œå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªæ•°ç»„å®Œæˆè·³è½¬ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥å°è¯•æ¥è®¡ç®—è¿™ä¸ªæ•°ç»„ã€‚</p>
<h3 id="nextæ•°ç»„çš„è®¡ç®—æ–¹æ³•">nextæ•°ç»„çš„è®¡ç®—æ–¹æ³•</h3>
<p>ä¸ºäº†æ¨å¯¼æ–¹ä¾¿ï¼Œæ­¤æ—¶æˆ‘ä»¬å‡è®¾<code>p=ababdababaa</code>ï¼Œå®é™…ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬åªéœ€è¦çŸ¥é“å¦‚ä½•ä»<code>next[0~i - 1]</code>æ¨å¾—<code>next[i]</code>å³å¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//æ­¤æ—¶æˆ‘ä»¬å‡è®¾æˆ‘ä»¬å·²çŸ¥next[8]æ¨å¯¼next[9]ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹å­—ç¬¦ä¸²ï¼Œå¯ä»¥çœ‹åˆ°next[8] = 3</span><br><span class="line">|aba|bd|aba|baa</span><br><span class="line">//è€Œæ­£å› ä¸ºæˆ‘ä»¬å·²çŸ¥äº†next[8] = 3ï¼Œæˆ‘ä»¬çŸ¥é“p[1:3] == p[6:8]åŒæ—¶p[1:4] != p[5:8]ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­å‘åè¯»å…¥ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">|aba|bd|aba|baa</span><br><span class="line">     ^      ^p[9]</span><br><span class="line">     p[next[9 - 1] + 1]</span><br><span class="line">//å¯ä»¥å‘ç°æ­¤æ—¶p[next[9 - 1] + 1] == p[9]ï¼Œæ•…æˆ‘ä»¬å¯ä»¥å¾—åˆ°p[9] = p[8] + 1</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯æˆ‘ä»¬é¢ä¸´ç€ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœç¬¬ä¸€æ¬¡åŒ¹é…ä¸æˆåŠŸåº”è¯¥æ€ä¹ˆè§£å†³ï¼Œæˆ‘ä»¬å‡è®¾ä¸‹é¢ä¸€ç§æƒ…å†µ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">|abab|d|abab|aa</span><br><span class="line"> 1234 5 6789 01</span><br><span class="line">//æ­¤æ—¶æˆ‘ä»¬éœ€è¦è®¡ç®—next[10]ï¼Œä½†æ˜¯å¾ˆä¸å¹¸p[next[10 - 1] + 1] != p[10]</span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†æ±‚è§£å¾—åˆ°<code>next[10]</code>ï¼Œæˆ‘ä»¬åªèƒ½é€€è€Œæ±‚å…¶æ¬¡ï¼Œå»å°è¯•æ›´çŸ­çš„å­ä¸²çœ‹çœ‹æ˜¯å¦å¯ä»¥æ±‚è§£ã€‚æ ¹æ®<code>next[9]=4</code>æˆ‘ä»¬å¯ä»¥çŸ¥é“<code>p[1:4] == p[6:9]</code>ï¼Œè€Œæˆ‘ä»¬åˆå¯ä»¥å‘ç°<code>next[next[9]] = next[4] = 2</code>ï¼Œå³<code>p[1:2] == p[3:4]</code>ï¼Œè€Œæ ¹æ®<code>next[9]</code>çš„å®šä¹‰æˆ‘ä»¬åˆçŸ¥é“<code>p[3:4] == p[8:9]</code>ï¼ŒåŒæ—¶<code>p[next[next[9]] + 1] == p[10]</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—åˆ°<code>p[1:3] == p[8:10]</code>å³<code>next[10] = 3</code>ã€‚</p>
<p>è€Œä¸Šé¢çš„æ¨å¯¼å­˜åœ¨ä¸€ä¸ªè¾¹ç•Œï¼Œå³å½“<code>next[next[....]] = 0</code>æ—¶ï¼Œæ­¤æ—¶ä¸å†æŒ‡æœ›<code>next[0~n-1]</code>ä¼šå¯¹<code>next[n]</code>åšå‡ºä»»ä½•è´¡çŒ®ã€‚</p>
<h3 id="nextæ•°ç»„æ„é€ ä»£ç å®ç°">nextæ•°ç»„æ„é€ ä»£ç å®ç°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>, j = <span class="number">0</span>; i &lt;= m; ++i) <span class="comment">// å‡è®¾å­—ç¬¦ä¸²é•¿åº¦ä¸ºmï¼Œä¸”ä¸‹æ ‡èµ·ç‚¹ä¸º1</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(j &amp;&amp; p[i] != p[j + <span class="number">1</span>]) j = next[j]; <span class="comment">// å½“å‡ºç°é€€æ— å¯é€€ï¼ˆå³jå›åˆ°äº†0çš„ä½ç½®ï¼‰æˆ–åŒ¹é…æˆåŠŸçš„æ—¶å€™è·³å‡ºå¾ªç¯</span></span><br><span class="line">  <span class="keyword">if</span> (p[i] == p[j + <span class="number">1</span>]) j ++; <span class="comment">// å¯¹åº”äº†åŒ¹é…æˆåŠŸçš„æƒ…å†µ</span></span><br><span class="line">  next[i] = j; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åŒ¹é…è¿‡ç¨‹">åŒ¹é…è¿‡ç¨‹</h3>
<p>æ—¢ç„¶æ­¤æ—¶æˆ‘ä»¬è·å¾—äº†<code>next[]</code>ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥å¼€å§‹å°è¯•è¿›è¡ŒåŒ¹é…<code>s</code>å’Œ<code>p</code>äº†ï¼ŒåŒ¹é…è¿‡ç¨‹ä¸<code>next[]</code>æ„é€ çš„è¿‡ç¨‹ç±»ä¼¼ï¼Œå³åœ¨å‡ºç°ç¬¬ä¸€ä¸ªæ— æ³•åŒ¹é…å³<code>s[i] != p[j]</code>æˆ–è€…åŒ¹é…å®Œå…¨æ—¶ï¼Œå°†ä¼šå°è¯•æœ€å¤§ç¨‹åº¦çš„å‘å‰ç§»åŠ¨ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯ç»§ç»­å‡è®¾å¾…åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯<code>s = ababababfab</code>è€Œå­ä¸²ä¸º<code>p = ababf</code>ï¼ŒåŒ¹é…çš„è¿‡ç¨‹å¯ä»¥åƒè¿™æ ·è¿›è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ababababfab</span><br><span class="line">ababf</span><br><span class="line">    ^å‡ºç°ä¸åŒ¹é…</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æˆ‘ä»¬è¦å¼€å§‹æ‰¾æœ€é•¿çš„å¯ä»¥ç§»åŠ¨çš„è·ç¦»ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°<code>s[5] == p[3]</code>ï¼Œè€ŒåŒæ—¶å­˜åœ¨<code>p[1:2] == p[3:4]</code>ï¼Œæ•…æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½œå¦‚ä¸‹çš„ç§»åŠ¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ababababfab</span><br><span class="line">  ababf</span><br><span class="line">     ^ä¸‹ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦åŒ¹é…çš„å­—ç¬¦</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°è¿™æ ·æˆ‘ä»¬å°±æˆåŠŸå®ç°äº†åˆ©ç”¨<code>next[]</code>ä¸€æ¬¡æ€§ç§»åŠ¨å¤šä½çš„æ“ä½œã€‚è¿™é‡Œçš„æ€æƒ³ä¸æ±‚<code>next[]</code>çš„è¿‡ç¨‹ç±»ä¼¼ï¼Œå³æˆ‘ä»¬å®é™…ä¸Šæ˜¯åœ¨<code>s</code>ä¸Šæœç´¢ä¸€ä¸ªä¸å½“å‰å·²çŸ¥å‰ç¼€ç›¸äº’åŒ¹é…çš„åç¼€ï¼Œå‡è®¾å­˜åœ¨ä»»ä½•ä¸€ä¸ªå¯ä»¥ç›¸äº’åŒ¹é…çš„å‰åç¼€å³å¯ç›´æ¥å°†å­—ç¬¦ä¸²å¼€å¤´ç§»åŠ¨åˆ°æ±‚å¾—çš„åç¼€çš„å¼€å¤´çš„ä½ç½®ã€‚</p>
<h3 id="åŒ¹é…è¿‡ç¨‹ä»£ç å®ç°">åŒ¹é…è¿‡ç¨‹ä»£ç å®ç°</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for (int i = 1, j = 0; i &lt;= n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">	while(j &amp;&amp; s[i] != p[j + 1]) j = next[j]; // åœ¨sä¸ŠåŒ¹é…ä¸€ä¸ªpçš„åç¼€ï¼Œè€Œç”±äºæœ€ç»ˆæ±‚å¾—çš„å‰åç¼€æ˜¯å‰é¢nextæ•°ç»„å¾—åˆ°çš„å‰åç¼€ï¼Œæ•…å¯ä»¥ç›´æ¥è·å¾—å‰æ–‡ä¸­ä¸‰ä¸ªå­ä¸²ç›¸äº’çš„å…³ç³»ã€‚</span><br><span class="line">	if (s[i] == p[j + 1]) j ++; // è‹¥å½“å‰ä½ç½®åŒ¹é…æˆåŠŸåˆ™åç§»å¾…åŒ¹é…çš„æŒ‡é’ˆ</span><br><span class="line">	if (j == m) // jåˆ°è¾¾äº†pçš„æœ«å°¾</span><br><span class="line">	&#123;</span><br><span class="line">		// åŒ¹é…æˆåŠŸ</span><br><span class="line">		j = ne[j]; // ç»§ç»­åç§»</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="kmpç®—æ³•çš„åº”ç”¨">KMPç®—æ³•çš„åº”ç”¨</h2>
<h3 id="çŠ¶æ€æœºkmpacwing-1052.-è®¾è®¡å¯†ç ">çŠ¶æ€æœº+KMP(AcWing 1052. è®¾è®¡å¯†ç )</h3>
<p>è¯¥é¢˜ç›®ä¸­å®é™…ä¸Šå¯ä»¥å°†æˆ‘ä»¬éœ€è¦æ±‚å¾—çš„å¯†ç è§†ä½œ<code>n</code>æ¬¡çŠ¶æ€è½¬æ¢ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªçŠ¶æ€å³<code>state[0]</code>å°±æ˜¯ä¸å­˜åœ¨ä»»ä½•åŒ¹é…çš„çŠ¶æ€ï¼Œè€Œç”±äºæˆ‘ä»¬çš„è¦æ±‚æ˜¯ä¸èƒ½åŒ¹é…å­ä¸²ï¼Œå‡è®¾å­ä¸²é•¿åº¦ä¸º<code>m</code>ï¼Œæ•…æˆ‘ä»¬è¦æ±‚ä¸èƒ½åˆ°è¾¾<code>state[m]</code>ã€‚</p>
<p>ç”±äºå¯†ç çš„æ¯ä¸€ä½éƒ½å­˜åœ¨26ç§æƒ…å†µï¼ˆé¢˜ç›®ä¸­å¯†ç ç»„æˆæ˜¯å…¨å°å†™å­—æ¯ï¼‰ï¼Œæ•…å¯¹äºæ¯ä¸€ä¸ªçŠ¶æ€å‡å­˜åœ¨26ç§è½¬ç§»æ–¹å¼ã€‚è€Œæˆ‘ä»¬åˆçŸ¥é“å¯¹äºKMPç®—æ³•å®é™…ä¸Šæ¯æ¬¡åœ¨è®¡ç®—åŒ¹é…æƒ…å†µçš„æ—¶å€™å…¶éƒ½åªä¼šå…³å¿ƒå¾…åŒ¹é…ä¸²<code>s</code>çš„ä¸€ä¸ªå­—æ¯ï¼Œæ ¹æ®è¿™ç§æ€§è´¨æˆ‘ä»¬å¯ä»¥åˆ©ç”¨KMPçš„åŒ¹é…æ–¹å¼æ±‚å¾—æ¯ç§çŠ¶æ€æœ€è¿œå¯ä»¥åŒ¹é…çš„å­ä¸²é•¿åº¦ï¼Œåªè¦æ±‚å¾—çš„é•¿åº¦æ²¡æœ‰åˆ°è¾¾<code>n</code>é‚£å°±æ˜¯ä¸€ç§å¯ç”¨çš„å¯†ç ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬åŒæ ·å¯ä»¥è®¡ç®—å‡ºKMPæ‰€éœ€çš„<code>next[]</code>ï¼Œç„¶åå¯ä»¥è¿›è¡ŒçŠ¶æ€è½¬ç§»</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">&#123; </span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; ++j) <span class="comment">// è¿™é‡Œæˆ‘ä»¬å‡è®¾ä¸èƒ½è¢«åŒ…å«çš„å­ä¸²é•¿åº¦ä¸ºm</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">char</span> k = <span class="string">&#x27;a&#x27;</span>; k &lt;= <span class="string">&#x27;z&#x27;</span>; ++k)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> u = j; <span class="comment">// è¿™é‡Œçš„uå³ä¸ºæˆ‘ä»¬å½“å‰kå¯ä»¥åŒ¹é…åˆ°çš„æœ€é•¿å­ä¸²é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœç›´æ¥å¾—åˆ°k == p[j + 1]æ—¶å°†ä¼šç›´æ¥å¾—åˆ°æœ€å¤§åŒ¹é…é•¿åº¦</span></span><br><span class="line">			<span class="keyword">while</span>(u &amp;&amp; k != p[u + <span class="number">1</span>]) u = next[u];</span><br><span class="line">			<span class="keyword">if</span> (k == p[u + <span class="number">1</span>]) u++;</span><br><span class="line">			<span class="keyword">if</span> (u &lt; m) f[i + <span class="number">1</span>][u] = (f[i + <span class="number">1</span>][u] + f[i + <span class="number">1</span>][j]) % MOD;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•å­¦ä¹ </tag>
        <tag>AcWing</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»é›¶å¼€å§‹çš„Rustç”Ÿæ´»ï¼š00-å‰è¨€</title>
    <url>/2020/11/20/Rust-00/</url>
    <content><![CDATA[<h1 id="å…³äºæˆ‘ä¸ºä»€ä¹ˆè¦å†™è¿™ä¸ªç³»åˆ—çš„åšå®¢">å…³äºæˆ‘ä¸ºä»€ä¹ˆè¦å†™è¿™ä¸ªç³»åˆ—çš„åšå®¢</h1>
<p>æˆ‘åªæ˜¯ä¸€ä½Ruståˆå­¦è€…ï¼Œå†™è¿™ç¯‡åšå®¢ä¸€æ–¹é¢æ˜¯ä¸ºäº†è®°å½•è‡ªå·±Rustçš„å­¦ä¹ å†ç¨‹ï¼Œå¦å¤–ä¸€æ–¹é¢ä¹Ÿå¸Œæœ›å¯ä»¥ä¸ºåæ¥å­¦Rustçš„äººæŒ‡å‡ºä¸€æ¡è·¯ï¼Œè™½ç„¶æˆ‘è§‰å¾—æˆ‘è¿˜ä¸å¤Ÿæ ¼è¢«ç§°ä¸ºé¢†è·¯äººï¼Œä½†æ˜¯æˆ‘å¸Œæœ›ç»ˆæœ‰ä¸€å¤©ä¹Ÿå¯ä»¥ç§°ä¸ºåƒ<a href="https://github.com/ZhangHanDong/">å¼ æ±‰ä¸œ</a>è¿™æ ·çš„å¤§ç¥ï¼Œèƒ½å¤Ÿåƒé€Rustè¿™é—¨è¯­è¨€ï¼Œè®©Rustçš„ç¼–è¯‘å™¨æˆä¸ºè‡ªå·±çš„æœ‹å‹è€Œå¹¶éæ•Œäººï¼Œè™½ç„¶åœ¨å­¦ä¹ çš„å‰æœŸå¥¹çš„ç¡®åƒä¸€ä¸ªæ•Œäººé‚£æ ·é˜»ç¢ç€ä»£ç çš„ç¼–è¯‘(ç¬‘)ã€‚æ€»ä¹‹è¿™ä¸ªç³»åˆ—çš„åšå®¢å°†ä¼šæˆä¸ºæˆ‘Rustå­¦ä¹ ä¹‹è·¯çš„ä¸€ä¸ªè®°å½•ï¼Œä¹Ÿå¸Œæœ›å®ƒå¯ä»¥ç»™æ¯ä¸€ä¸ªäººå¸®åŠ©ã€‚</p>
<span id="more"></span>
<h1 id="å…³äºæˆ‘ä¸ºä»€ä¹ˆä¼šé€‰æ‹©rust">å…³äºæˆ‘ä¸ºä»€ä¹ˆä¼šé€‰æ‹©Rust</h1>
<ol type="1">
<li>å¥¹æ˜¯å®‰å…¨çš„</li>
<li>å¥¹æ˜¯å…¨æ–°çš„</li>
<li>å¥¹æ˜¯ç¤¾åŒºé©±åŠ¨çš„</li>
<li>å¥¹æ˜¯å¥‡å¦™çš„</li>
<li>å¥¹ä¼šæ•™ä¼šä½ å¦‚ä½•å†™å‡ºå®‰å…¨çš„ä»£ç </li>
</ol>
<h1 id="å…³äºæœ¬ç³»åˆ—åšå®¢çš„ä¸€äº›è¯´æ˜">å…³äºæœ¬ç³»åˆ—åšå®¢çš„ä¸€äº›è¯´æ˜</h1>
<ol type="1">
<li>æ‰€æœ‰çš„ä»£ç å‡ä¼šåœ¨å¯¹åº”åšå®¢å†™ä½œæ—¶çš„Rust Stableç‰ˆæœ¬ä¸‹æˆåŠŸè¿è¡Œ</li>
<li>æˆ‘å°†ä¼šå®Œå…¨ä»ä¸€ä¸ªåˆå­¦è€…çš„è§’åº¦æ¥çœ‹Rustï¼Œæ‰€ä»¥è‡ªç„¶ä¹Ÿæ²¡æœ‰é‚£äº›ä¹¦ç±å†™çš„é‚£ä¹ˆå…¨é¢</li>
<li>ä¸»è¦çš„å†…å®¹å°†ä¼šå‚è€ƒ<a href="https://book.douban.com/subject/30312231/">ã€Šæ·±å…¥æµ…å‡ºRustã€‹</a>å’Œ<a href="https://book.douban.com/subject/30418895/">ã€ŠRustç¼–ç¨‹ä¹‹é“ã€‹</a>ï¼Œä¹Ÿæ¨èå¤§å®¶å¯ä»¥å»çœ‹çœ‹</li>
<li>ä¸€åˆ‡çš„å†…å®¹éƒ½æ˜¯å…´è¶£ä½¿ç„¶çš„</li>
<li>æ¬¢è¿æissue</li>
</ol>
<h1 id="å…³äºå¦‚ä½•å®‰è£…rust">å…³äºå¦‚ä½•å®‰è£…Rust</h1>
<p>å‡ºé—¨å·¦è½¬<a href="https://www.rust-lang.org/">Rustå®˜ç½‘</a>ï¼Œå³ä¸Šè§’åˆ‡æ¢åˆ°ä¸­æ–‡ï¼Œç›¸ä¿¡å¤§å®¶éƒ½çœ‹å¾—æ‡‚çš„å§(ç¬‘)</p>
<h1 id="å…³äºç”¨ä»€ä¹ˆide">å…³äºç”¨ä»€ä¹ˆIDE</h1>
<p>æœ¬äººç›®å‰ä½¿ç”¨çš„æ˜¯CLioné…åˆRustæ’ä»¶ï¼Œä¹‹å‰ä¹Ÿæ¥è§¦è¿‡vscode + rust(rls)æ’ä»¶å’Œvscode + rust-analyzerè¿™ä¸¤ç§æ­é…ï¼Œå…·ä½“é‚£ç§å¥½ç”¨æˆ‘ä¹Ÿä¸å¥½è¯´ï¼Œä½†æ˜¯å¦‚æœçœŸçš„æƒ³è¦æœ€å®Œæ•´çš„IDEä½“éªŒçš„è¯æœ¬äººæ›´æ¨èä½¿ç”¨CLion+Rustæ’ä»¶çš„ç»„åˆï¼Œä¸è¿‡åŸºäºå¼€æºã€ç¾è§‚(ä¸»è¦æ˜¯ç¾è§‚)çš„åŸåˆ™ï¼Œæˆ‘æ›´å€¾å‘äºvscode + rust-analyzerè¿™ç§æ­é…ã€‚</p>
]]></content>
      <tags>
        <tag>Rust</tag>
        <tag>ç¨‹åºè¯­è¨€</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»é›¶å¼€å§‹çš„Rustç”Ÿæ´»ï¼š01-åŸºæœ¬ç±»å‹ä¸åŸºæœ¬è¿ç®—ç¬¦</title>
    <url>/2020/11/21/Rust-01/</url>
    <content><![CDATA[<h1 id="rustä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹">Rustä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹</h1>
<p>Rustä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹å’Œå¤§å¤šæ•°çš„è¯­è¨€ä¸€æ ·ï¼Œéƒ½å¯ä»¥ç®€å•çš„è¢«åˆ†ä¸ºæ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”å‹ç­‰ç­‰ï¼ŒåŒæ—¶Rustè¿˜æœ‰ä¸€äº›ä¸“å±äºè‡ªèº«çš„ä¸€äº›å¾ˆå¥‡å¦™çš„ç±»å‹ï¼ŒåŒ…æ‹¬<code>Option&lt;T&gt;</code>,<code>Box&lt;T&gt;</code>ç­‰ç­‰ã€‚</p>
<p>é€šå¸¸Rustä¸­çš„ç±»å‹å¯¹åº”çš„ç¬¦å·ä¸ºï¼š</p>
<ul>
<li>æœ‰ç¬¦å·æ•´å‹ï¼š<code>isize</code>,<code>i8</code>,<code>i16</code>,<code>i32</code>,<code>i64</code>,<code>i128</code></li>
<li>æ— ç¬¦å·æ•´å‹ï¼š<code>usize</code>,<code>u8</code>,<code>u16</code>,<code>u32</code>,<code>u64</code>,<code>u128</code></li>
<li>æµ®ç‚¹å‹ï¼š<code>f32</code>,<code>f64</code></li>
<li>å¸ƒå°”å‹ï¼š<code>bool</code></li>
<li>unitç±»å‹ï¼š<code>()</code></li>
<li>å¼•ç”¨ï¼š<code>&amp;T</code>,<code>&amp;mut T</code></li>
<li>è£¸æŒ‡é’ˆï¼š<code>*mut T</code>,<code>*const T</code></li>
<li><code>!</code></li>
</ul>
<span id="more"></span>
<p>è¿™é‡Œå€¼å¾—ä¸€æçš„æ˜¯ï¼ŒRustä¸­çš„<code>!</code>ç±»å‹åœ¨å¤šæ•°æƒ…å†µä¸‹å®é™…ä¸Šä»£è¡¨äº†<strong>ä¸ä¼šè¿”å›</strong>ï¼Œä»–çš„åŠŸèƒ½åŒ…æ‹¬åœ¨<code>match()</code>å—ä¸­å®ç°å¯¹å„ç§æ¡ä»¶è¿”å›ç±»å‹çš„è¡¥å…¨(å› ä¸ºRustä¸­å¯¹äº<code>match()</code>å—è¦æ±‚æ¯ä¸ªåˆ†æ”¯çš„è¿”å›ç±»å‹å¿…é¡»ç›¸åŒï¼Œå½“æŸä¸€ä¸ªåˆ†æ”¯ä¸ä¼šè¿”å›è€Œæ˜¯å¯¼è‡´ç¨‹åºå¼‚å¸¸é€€å‡ºçš„æ—¶å€™åˆ™å¯ä»¥é€šè¿‡è¿”å›ä¸€ä¸ª<code>!</code>æ¥é€šè¿‡ç¼–è¯‘å™¨æ£€æŸ¥)</p>
<p>å¦å¤–å¯¹äºRustè¿˜æœ‰ä»¥ä¸‹å‡ ç§å¸¸ç”¨çš„ç±»å‹ï¼š</p>
<ul>
<li><code>Option&lt;T&gt;</code>ï¼šRustç”¨äºè§£å†³"ç©º"çš„ä¸€ä¸ªæ–¹æ¡ˆï¼Œä¸€ä¸ª<code>Option&lt;T&gt;</code>æšä¸¾é‡å¯ä»¥æ˜¯ä¸€ä¸ª<code>Option&lt;T&gt;::Some(n)</code>ä»£è¡¨éç©ºï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª<code>Option&lt;T&gt;::None</code>è¡¨ç¤ºç©º</li>
<li><code>Box&lt;T&gt;</code>ï¼šå †ä¸Šåˆ†é…çš„æŒ‡é’ˆ</li>
<li><code>Rc&lt;T&gt;</code>,<code>Arc&lt;T&gt;</code>ï¼šæ™ºèƒ½æŒ‡é’ˆ(å¯ä»¥è¿™ä¹ˆæƒ³)</li>
<li><code>RefCell&lt;T&gt;</code>ï¼šæ›´åŠ ç¥å¥‡çš„æŒ‡é’ˆ(ä¹‹åä¼šè®¨è®ºçš„)</li>
<li>ä»¥åŠå¾ˆå¤š</li>
</ul>
<p>å¯ä»¥è¯´Rustä¸ºäº†ä¿è¯å…¶åŸºæœ¬çš„å®‰å…¨å¯ä»¥è¯´æ˜¯è´¹å°½äº†å¿ƒæ€ï¼Œæå‡ºäº†ä¸€å¤§å †ç”¨äºåº”å¯¹å„ç§æƒ…å†µçš„ç±»å‹ï¼ŒæŸç§æ„ä¹‰ä¸Šè¿™ä¹Ÿæ˜¯Rustéš¾å­¦çš„ä¸€ä¸ªé‡è¦åŸå› ã€‚</p>
<h1 id="ç±»å‹å¼ºåˆ¶è½¬æ¢">ç±»å‹å¼ºåˆ¶è½¬æ¢</h1>
<p>ç±»å‹å¼ºåˆ¶è½¬æ¢å¯ä»¥è¯´æ˜¯å‡ ä¹ç°å½¹çš„æ‰€æœ‰ç¨‹åºè¯­è¨€å¿…å¤‡çš„åŠŸèƒ½ï¼ŒRustè‡ªç„¶ä¹Ÿä¸ä¾‹å¤–ã€‚<br />
å¯¹äºRustå…¶ä½¿ç”¨äº†å…³é”®å­—<code>as</code>ç”¨äºç±»å‹è½¬æ¢ã€‚å¯¹äºRustæ¥è¯´å¼ºåˆ¶ç±»å‹è½¬æ¢åŒæ ·éœ€è¦å„ä¸ªç±»å‹ä¹‹é—´æ˜¯æ”¯æŒå¼ºåˆ¶ç±»å‹è½¬æ¢çš„ï¼Œä¸ç„¶ç¼–è¯‘å™¨æŠ¥é”™è­¦å‘Šã€‚åŒæ—¶Rustå¯¹äºä»é«˜ç±»å‹å‘ä½ç±»å‹è½¬æ¢çš„æ—¶å€™ä¸ä¼šæŠ¥é”™ï¼Œæœ€å¤šä¸€ä¸ªwarningäº†äº‹ï¼Œæ‰€ä»¥ä¹Ÿä¸è¦æŒ‡æœ›ç¼–è¯‘å™¨ä¼šå¸®ä½ è§£å†³æŠŠä¸€ä¸ª<code>i32</code>è½¬æ¢åˆ°<code>i8</code>å¯¼è‡´çš„æº¢å‡ºé—®é¢˜ã€‚</p>
<h1 id="è¿ç®—ç¬¦">è¿ç®—ç¬¦</h1>
<p>ä½œä¸ºä¸€æ¬¾åˆæ ¼çš„ç¨‹åºè¯­è¨€ï¼ŒRustè‡ªç„¶ä¹Ÿå…·æœ‰å®Œå¤‡çš„è¿ç®—ç¬¦ç³»ç»Ÿï¼Œè€ƒè™‘åˆ°è¿ç®—ç¬¦çš„æ•°é‡å®åœ¨æ˜¯å¤ªå¤šäº†(ä¸»è¦æ˜¯æ‡’)ï¼Œ<a href="https://kaisery.github.io/trpl-zh-cn/appendix-02-operators.html">è¿™é‡Œ</a>æ˜¯å®˜æ–¹çš„è¿ç®—ç¬¦åˆ—è¡¨ï¼Œå„ä½å¯ä»¥ä½œä¸ºå‚è€ƒèµ„æ–™ã€‚</p>
]]></content>
      <tags>
        <tag>Rust</tag>
        <tag>ç¨‹åºè¯­è¨€</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»é›¶å¼€å§‹çš„Rustç”Ÿæ´»ï¼š02-å‡½æ•°</title>
    <url>/2020/11/23/Rust-02/</url>
    <content><![CDATA[<h1 id="å‡½æ•°æ˜¯ä»€ä¹ˆ">å‡½æ•°æ˜¯ä»€ä¹ˆ</h1>
<p>ç›¸ä¿¡å„ä½å­¦Rustçš„è¯»è€…åº”è¯¥å¤šå°‘æ¥è§¦è¿‡è‡³å°‘ä¸€é—¨ç¨‹åºè¯­è¨€ï¼Œä¸è¿‡è¿™é‡Œæˆ‘è¿˜æ˜¯ä¼šæŒ‰ç…§æˆ‘çš„ç†è§£å°½å¯èƒ½çš„å»ä¸ºå‡½æ•°åšä¸€ä¸ªç›¸å¯¹æ›´ä¸ºç®€å•çš„å®šä¹‰ã€‚</p>
<p>å¯¹äºRustæ¥è¯´ï¼Œå‡½æ•°çš„æ„ä¹‰ä¸å¤§å¤šæ•°çš„ç¨‹åºè¯­è¨€éƒ½å¾ˆç›¸ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è§†ä½œç¨‹åºä¸­çš„ä¸€ä¸ªåŠŸèƒ½æ¨¡å—ã€‚è¿™ä¸ªåŠŸèƒ½æ¨¡å—å¯ä»¥å¯¹ä¸€äº›æˆ‘ä»¬ä¼šåå¤ä½¿ç”¨çš„ä»£ç è¿›è¡Œå°è£…ï¼Œä»è€Œå¤§å¹…åº¦ç®€åŒ–ç¨‹åºçš„å¼€å‘è¿‡ç¨‹ã€‚</p>
<span id="more"></span>
<h1 id="rustçš„å‡½æ•°é•¿ä»€ä¹ˆæ ·">Rustçš„å‡½æ•°é•¿ä»€ä¹ˆæ ·</h1>
<p>Rustä¸­å£°æ˜ä¸€ä¸ªå‡½æ•°éœ€è¦ç”¨åˆ°<code>fn</code>å…³é”®å­—ï¼Œé€šå¸¸ä¸€ä¸ªå‡½æ•°çš„æ ·å­å½¢å¦‚ <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">func</span></span>(arg1: T1, arg2: T2) -&gt; T&#123;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> å…¶ä¸­<code>func()</code>å°±æ˜¯å–œé—»ä¹è§çš„å‡½æ•°åï¼Œè€Œ<code>T</code>åˆ™å¯¹åº”çš„æ˜¯ä»–çš„è¿”å›ç±»å‹ï¼Œæ‹¬å·é‡Œé¢åˆ™æ˜¯å‡½æ•°éœ€è¦ä¼ å…¥çš„å‚æ•°ï¼Œç±»æ¯”åˆ°C++å¯ä»¥å°±åƒä¸‹é¢è¿™æ · <figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">T <span class="title">func</span><span class="params">(T1 arg1, T2 arg2)</span></span>&#123;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> å¯¹äºRustçš„å‡½æ•°ï¼Œä»–çš„è¿”å›å€¼å’Œå‚æ•°çš„å‚æ•°åˆ—è¡¨éƒ½æ˜¯å¯é€‰çš„ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç å°±å£°æ˜äº†ä¸€ä¸ªä¸éœ€è¦ä¼ å…¥å‚æ•°çš„å‡½æ•° <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">func</span></span>() -&gt; T&#123;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> è€Œä¸‹é¢è¿™æ ·åˆ™å£°æ˜äº†ä¸€ä¸ªæ²¡æœ‰è¿”å›å€¼çš„å‡½æ•° <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">func</span></span>(arg1:T)&#123;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> ä¼—æ‰€å‘¨çŸ¥çš„æ˜¯ä¸€ä¸ªå‡½æ•°å¦‚æœå£°æ˜äº†è¿”å›ç±»å‹åï¼Œå…¶å°±å¿…é¡»æœ‰ä¸€ä¸ªè¿”å›å€¼ã€‚å’Œå¤§å¤šæ•°è¯­è¨€ä¸€æ ·ï¼Œrustå¯ä»¥ä½¿ç”¨<code>return</code>è¿”å›ä¸€ä¸ªå€¼ï¼Œå°±åƒè¿™æ · <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">return_one</span></span>() -&gt; <span class="built_in">i32</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> ä½†æ˜¯å¯¹äºRustæ¥è¯´ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼å¯ä»¥ç”¨æ¥ä½œä¸ºè¿”å›å€¼ä½¿ç”¨ï¼Œåœ¨å¤šæ•°æƒ…å†µä¸‹Rustçš„å¼€å‘è€…ä»¬ä¹Ÿæ›´å€¾å‘ä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œè¿”å›ï¼Œå°±åƒä¸‹é¢è¿™æ · <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">mul</span></span>(x: <span class="built_in">i32</span>, y:<span class="built_in">i32</span>) -&gt; <span class="built_in">i32</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> t = x * y;</span><br><span class="line">    t</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> æˆ‘ä»¬å¯ä»¥çœ‹åˆ°çš„æ˜¯å‡½æ•°å†…çš„æœ€åä¸€è¡Œçš„<code>t</code>åé¢å¹¶æ²¡æœ‰<code>;</code>ï¼Œä½†æ˜¯æˆ‘ä»¬åˆçŸ¥é“Rustæ¯è¡Œä»£ç æœ€åå¿…ç„¶ä¼šæœ‰<code>;</code>ã€‚è€Œåœ¨ä¸€ä¸ªæœ‰è¿”å›å€¼çš„å‡½æ•°ä¸­ï¼Œé€šå¸¸è¿™æ ·çš„å†™æ³•ä¼šå‡ºç°åœ¨æ•´ä¸ªå‡½æ•°çš„æœ«å°¾ï¼Œä»–çš„å«ä¹‰ç­‰ä»·äº<code>return t;</code>ã€‚<br />
å¦å¤–ï¼ŒRustä¸æ­¢å¯ä»¥è¿”å›ä¸€ä¸ªç¡®å®šçš„å˜é‡ï¼Œå…¶åŒæ ·å¯ä»¥å°†ä¸€ä¸ªè¡¨è¾¾å¼ä½œä¸ºè¿”å›å€¼ï¼Œå°±åƒä¸‹é¢è¿™æ · <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">mul</span></span>(x:<span class="built_in">i32</span>, y:<span class="built_in">i32</span>) -&gt; <span class="built_in">i32</span>&#123;</span><br><span class="line">    x * y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> è¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½ç­‰ä»·äºä¸Šä¸€ä¸ª<code>mul()</code>ï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰å£°æ˜ä¸€ä¸ªä¸­é—´å˜é‡<code>t</code>ï¼Œè€Œæ˜¯é€‰æ‹©ç›´æ¥è¿”å›<code>x*y</code>ï¼Œè¿™æ ·çš„è¡Œä¸ºåœ¨Rustä¸­æ˜¯åˆæ³•çš„ï¼Œå®ƒåŒæ ·å¯ä»¥å®ç°ç›®æ ‡åŠŸèƒ½è€Œä¸ä¼šå‡ºç°ä»»ä½•ä¸å¯é¢„æœŸçš„é—®é¢˜ã€‚</p>
<h1 id="å…³äºé—­åŒ…">å…³äºé—­åŒ…</h1>
<p>Rustä¸­ä¹Ÿå­˜åœ¨ç€ä¸€ä¸ªç±»ä¼¼äºå¾ˆå¤šè¯­è¨€ä¸­æ‰€å­˜åœ¨çš„lambdaçš„å­˜åœ¨ï¼Œé‚£å°±æ˜¯é—­åŒ…ã€‚<br />
é—­åŒ…æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŒ¿åçš„å‡½æ•°ï¼Œå…¶è¢«å¹¿æ³›åº”ç”¨äºRustçš„å¤šçº¿ç¨‹å¤„ç†ä¸­ï¼Œæœ¬èŠ‚ä¸­ä¸ä¼šè®¨è®ºé—­åŒ…ï¼Œå› ä¸ºåœ¨æ•´ä¸ªRustå­¦ä¹ çš„å‰æœŸé—­åŒ…åŸºæœ¬ä¸ä¼šè¢«æåˆ°ã€‚</p>
]]></content>
      <tags>
        <tag>Rust</tag>
        <tag>ç¨‹åºè¯­è¨€</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»é›¶å¼€å§‹çš„Rustç”Ÿæ´»ï¼š03-æ§åˆ¶æµä¸é€»è¾‘è¿ç®—ç¬¦</title>
    <url>/2020/11/27/Rust-03/</url>
    <content><![CDATA[<h1 id="å‰è¨€">å‰è¨€</h1>
<p>ä½œä¸ºä¸€æ¬¾åˆæ ¼çš„ç¨‹åºè¯­è¨€ï¼ŒåŸºæœ¬çš„æ§åˆ¶è¯­å¥æ˜¯å¿…é¡»æœ‰çš„ï¼Œè€Œå¯¹äºRustæ¥è¯´å¥¹çš„æ§åˆ¶æµè¯­å¥ç›¸å¯¹äºä¼ ç»Ÿçš„è¯­è¨€æ¥è¯´éƒ½è¦æ›´ä¸ºä¸°å¯Œï¼Œæœ¬æ–‡å°†ä¼šå¤§ä½“åœ°ä»‹ç»Rustçš„å„ç±»æ§åˆ¶è¯­å¥åŠå…¶çš„åŸºæœ¬ç”¨æ³•ã€‚</p>
<span id="more"></span>
<h1 id="if">if</h1>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">```rust</span><br><span class="line">if condition &#123;</span><br><span class="line">    // do something</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    // do something</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="match">match</h1>
<p>è¯´åˆ°äº†<code>if</code>ï¼Œè‡ªç„¶å°‘ä¸äº†æˆ‘ä»¬çš„å¥½æœ‹å‹<code>switch</code>ï¼Œä¸è¿‡éå¸¸å–œé—»ä¹è§çš„æ˜¯Rustå¹¶æ²¡æœ‰<code>switch</code>ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯åŠŸèƒ½å¼ºå¤§çš„<code>match</code>ã€‚<code>match</code>ä½œä¸ºRustä¸­è‘—åçš„æ¡ä»¶é€‰æ‹©è¯­å¥ï¼Œå®ƒä¸æ­¢ç”¨äºå¤šæ¡ä»¶çš„åˆ¤æ–­æ§åˆ¶ï¼Œå®ƒè¿˜ç»å¸¸å‡ºç°äº<code>Option</code>çš„åˆ¤æ–­ç­‰ç­‰å„ç±»<code>None</code>ç±»å‹æˆ–è€…é”™è¯¯å¤„ç†çš„åœºæ™¯ã€‚å¸¸è§çš„<code>match</code>çš„ä½¿ç”¨åœºæ™¯å¦‚ä¸‹</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">match</span>(item)&#123;</span><br><span class="line">    condition_1 =&gt; <span class="comment">//do something</span></span><br><span class="line">    condition_2 =&gt; &#123;</span><br><span class="line">        <span class="comment">//do something</span></span><br><span class="line">    &#125;</span><br><span class="line">    _=&gt; <span class="comment">//do default thing</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°Rustçš„<code>match</code>è¯­å¥æ”¯æŒå•è¡Œæˆ–è€…å¤šè¡Œçš„æƒ…å†µï¼Œå…¶ä¸­å¤šè¡Œçš„æƒ…å†µå¿…é¡»ä½¿ç”¨å¤§æ‹¬å·åŒ…èµ·æ¥ï¼ŒåŒæ—¶<code>match</code>åŒæ ·æœ‰ä¸€ä¸ª<code>_</code>åˆ†æ”¯ï¼Œè¿™ä¸ªåˆ†æ”¯ä¸€èˆ¬æ˜¯ä½œä¸ºdefaultåˆ†æ”¯å­˜åœ¨ã€‚æœ‰ä¸€ç‚¹éå¸¸é‡è¦ï¼Œæ‰€æœ‰åˆ†æ”¯çš„è¿”å›å€¼ç±»å‹å¿…é¡»ç›¸åŒã€‚</p>
<p>ä½†æ˜¯å‰é¢åˆæåˆ°äº†<code>match</code>ç›¸å¯¹äº<code>switch</code>æ›´ä¸ºå¼ºå¤§ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å°†ä¼šæ¢è®¨ä¹‹æ‰€ä»¥<code>match</code>å¼ºå¤§çš„åŸå› </p>
<h2 id="matchå¯ä»¥ä½œä¸ºè¡¨è¾¾å¼">matchå¯ä»¥ä½œä¸ºè¡¨è¾¾å¼</h2>
<p>åœ¨Rustä¸­ï¼Œmatchæœ‰ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„ç”¨æ³•ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ‰€æœ‰çš„åˆ†æ”¯éƒ½å¿…é¡»è¦æœ‰è¿”å›å€¼ï¼Œå°±åƒè¿™æ ·</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="keyword">match</span> (item)&#123;</span><br><span class="line">    condition_1 =&gt; &#123;</span><br><span class="line">        <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    condition_2 =&gt; &#123;</span><br><span class="line">        <span class="number">1</span> * <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">    _=&gt; &#123;</span><br><span class="line">        <span class="number">3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹å„ä¸ªä»£ç å—æœ€ç»ˆçš„æ‰§è¡Œåçš„è¿”å›å€¼å°†ä¼šè¢«èµ‹ç»™<code>s</code></p>
<h2 id="matchçš„åˆ†æ”¯æ¡ä»¶å¯ä»¥ç”¨äºè§£åŒ…å„ç±»enum">matchçš„åˆ†æ”¯æ¡ä»¶å¯ä»¥ç”¨äºè§£åŒ…å„ç±»enum</h2>
<p>ä¸Šé¢ä¹Ÿè¯´åˆ°äº†<code>match</code>å¯ä»¥ç”¨äºå¤„ç†<code>Option&lt;T&gt;</code>ç±»å‹ï¼Œåœ¨Rustä¸­æˆ‘ä»¬å¯ä»¥è¿™æ ·ç”¨</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="literal">Some</span>(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">match</span>(s)&#123;</span><br><span class="line">    <span class="literal">Some</span>(x) =&gt; &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="literal">None</span> =&gt; &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;is none&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="comment">// è¾“å‡º5</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å°±åƒè¿™æ ·ï¼ŒRustå¯ä»¥åˆ©ç”¨<code>match</code>è¯­å¥è½»æ¾åœ°è§£å†³<code>Option&lt;T&gt;</code>ç±»å‹çš„é—®é¢˜ã€‚</p>
<h1 id="åè®°">åè®°</h1>
<p>åœ¨å†™äº†å››ç¯‡Rustçš„åšå®¢ä¹‹åï¼Œæˆ‘çªç„¶å‘ç°è‡ªå·±å¯¹Rustçš„ç†è§£éå¸¸çš„é›¶æ•£è‚¤æµ…ï¼Œæ‰€ä»¥ä»æœ¬ç¯‡å¼€å§‹ã€Šä»é›¶å¼€å§‹çš„Rustç”Ÿæ´»ã€‹ç³»åˆ—å°†ä¼šæš‚æ—¶åœæ›´ï¼Œå¾…åˆ°æˆ‘æ›´åŠ äº†è§£Ruståå†ç»§ç»­è¿›è¡Œæ›´æ–°ã€‚æ¥ä¸‹æ¥æœ¬åšå®¢å°†ä¼šå¼€å§‹é€æ­¥æ›´æ–°æœ¬äººçš„Rustå­¦ä¹ è®°å½•ï¼ŒåŒæ­¥äºæœ¬äººçš„Rustçš„å­¦ä¹ è¿›ç¨‹ã€‚</p>
]]></content>
      <tags>
        <tag>Rust</tag>
        <tag>ç¨‹åºè¯­è¨€</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¿¡å·é‡æœºåˆ¶ä¸ç®¡ç¨‹</title>
    <url>/2020/11/18/Semaphore-and-Monitor/</url>
    <content><![CDATA[<h1 id="ä¿¡å·é‡æœºåˆ¶">ä¿¡å·é‡æœºåˆ¶</h1>
<p>ä¿¡å·é‡æœºåˆ¶æœ€æ—©ç”±æå‡ºå›¾è®ºçš„Dijkstraæå‡ºï¼Œå…¶è¢«å¹¿æ³›åœ°ä½¿ç”¨äºæ“ä½œç³»ç»Ÿä¸­ç”¨äºè§£å†³åŒæ­¥é—®é¢˜ã€‚</p>
<h2 id="ä¿¡å·é‡ç®€ä»‹">ä¿¡å·é‡ç®€ä»‹</h2>
<p>ä¿¡å·é‡ä¸€èˆ¬ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆ</p>
<ul>
<li>ä¸€ä¸ªæ•´å½¢<code>sem</code><br />
é€šå¸¸<code>sem</code>çš„å€¼ç­‰äºå…±äº«èµ„æºçš„æ•°é‡</li>
<li>ä¸¤ä¸ªæ“ä½œ
<ul>
<li>Pæ“ä½œ(åˆåWait)<br />
Pæ“ä½œé€šå¸¸ç”¨äºç”³è¯·èµ„æºï¼Œå…¶çš„ä¸»è¦è¿‡ç¨‹ä¸€èˆ¬ä¸º
<ul>
<li><code>sem -= 1</code></li>
<li>å½“<code>sem &lt; 0</code>blockå½“å‰è¿›(çº¿)ç¨‹ï¼Œå¹¶æ”¾å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­</li>
</ul></li>
<li>Væ“ä½œ(åˆåSignal)<br />
Væ“ä½œé€šå¸¸ç”¨äºé‡Šæ”¾èµ„æºï¼Œå…¶çš„ä¸»è¦è¿‡ç¨‹ä¸€èˆ¬ä¸º
<ul>
<li><code>sem += 1</code></li>
<li>å½“<code>sem &lt;=0</code>æ—¶ä»ç­‰å¾…é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªè¿›(çº¿)ç¨‹ï¼Œå¹¶å”¤é†’</li>
</ul></li>
</ul></li>
</ul>
<p>å€ŸåŠ©ä¿¡å·é‡æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥è§£å†³å¾ˆå¤šçš„å¤šè¿›(çº¿)ç¨‹é—´åŒæ­¥çš„é—®é¢˜ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†ä¼šä½¿ç”¨å‡ ä¸ªä¾‹å­æ¥è¿›ä¸€æ­¥åœ°äº†è§£ä¿¡å·é‡çš„ä½œç”¨ã€‚</p>
<span id="more"></span>
<h2 id="ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜">ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜</h2>
<p>ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜æ˜¯ä¸€ä¸ªéå¸¸è‘—åçš„å¤šçº¿ç¨‹é—´åŒæ­¥çš„é—®é¢˜ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†ä¼šå›´ç»•è¿™ä¸ªé—®é¢˜æ¢è®¨ä¿¡å·é‡æœºåˆ¶çš„æ„ä¹‰ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬å‡è®¾ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªç›’å­ï¼Œxä¸ªæ¶ˆè´¹è€…å’Œyä¸ªç”Ÿäº§è€…ã€‚å¹¶ä¸”æˆ‘ä»¬è§„å®šåŒæ—¶å¯ä»¥æœ‰æ¶ˆè´¹è€…ä»ç›’å­ä¸­å–å‡ºä¸œè¥¿ï¼ŒåŒæ—¶åªèƒ½ç”±ä¸€ä½ç”Ÿäº§è€…å‘ç›’å­ä¸­æ”¾å…¥ä¸œè¥¿ï¼Œä¸”æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…åŒæ ·ä¸èƒ½åŒæ—¶ä»ç›’å­ä¸­å–å‡ºæˆ–è€…æ”¾å…¥ä¸œè¥¿ã€‚</p>
<h3 id="æƒ…æ™¯0å¤šæ¶ˆè´¹è€…-æ— ç”Ÿäº§è€…-ç›’å­å†…çš„èµ„æºæ— é™">æƒ…æ™¯0ï¼šå¤šæ¶ˆè´¹è€…-æ— ç”Ÿäº§è€…-ç›’å­å†…çš„èµ„æºæ— é™</h3>
<p>æƒ…æ™¯0å¹¶ä¸æ˜¯å®šä¹‰ä¸Šçš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ï¼Œè¿™ç§æƒ…å†µåªæ˜¯æå‡ºç”¨äºå…·ä½“äº†è§£ä¿¡å·é‡çš„å·¥ä½œæ–¹å¼çš„æƒ…æ™¯ï¼Œæ•…åœ¨æœ¬æƒ…æ™¯ä¸­æˆ‘ä»¬å‡è®¾åŒæ—¶åªèƒ½æœ‰ä¸€ä½æ¶ˆè´¹è€…ä»ç›’å­ä¸­å–å‡ºä¸œè¥¿ã€‚<br />
è¿™ç§æƒ…å†µå®é™…ä¸Šå¯ä»¥é€€åŒ–ä¸ºå¤šä¸ªç­‰ä»·çš„ä¸ªä½“ç«äº‰ä¸€ä¸ªèµ„æºçš„æƒ…å†µï¼Œç”±äºæˆ‘ä»¬è§„å®šäº†ç›’å­åŒæ—¶åªèƒ½ç”±ä¸€ä½æ¶ˆè´¹è€…è¿›è¡Œè®¿é—®ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå°±å¯ä»¥ä½¿ç”¨ä¸€ä¸ªä¿¡å·é‡è¡¨ç¤ºç›’å­çš„å ç”¨æƒ…å†µï¼Œç”±ä¸Šæ–‡ä¸­çš„ä¿¡å·é‡çš„å®šä¹‰æˆ‘ä»¬å¯ä»¥å¾—çŸ¥å½“ä»»ä½•æ¶ˆè´¹è€…å¯¹ç›’å­è¿›è¡Œè®¿é—®åä¸‹ä¸€æ¬¡å¯¹<code>res.wait()</code>çš„è°ƒç”¨å°±ä¼šå°†æ–°çš„è¿›ç¨‹é˜»å¡ï¼Œç›´åˆ°è®¿é—®ç›’å­çš„æ¶ˆè´¹è€…è°ƒç”¨<code>res.signal()</code>è¿›è¡Œå”¤é†’ã€‚ <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> res: Semaphore = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">consumer</span></span>()&#123;</span><br><span class="line">    res.wait();</span><br><span class="line">    <span class="comment">//å¯¹ç›’å­ä¸­çš„èµ„æºè¿›è¡Œæ¶ˆè´¹</span></span><br><span class="line">    res.signal();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="æƒ…æ™¯1å•æ¶ˆè´¹è€…-å•ç”Ÿäº§è€…-ç›’å­å®¹é‡ä¸ºä¸€">æƒ…æ™¯1ï¼šå•æ¶ˆè´¹è€…-å•ç”Ÿäº§è€…-ç›’å­å®¹é‡ä¸ºä¸€</h3>
<p>ä»æƒ…æ™¯1å¼€å§‹æ‰æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„æ¶ˆè´¹è€…ç”Ÿäº§è€…é—®é¢˜ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯é™åˆ¶äº†æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…çš„æ•°é‡å‡ä¸º1ã€‚å¯¹äºæœ¬æƒ…æ™¯ä¸­çš„æ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ„é€ å¾—åˆ°ä¸‹è¿°çš„ä¼ªä»£ç  <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> full: Semaphore = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> empty: Semaphore = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">consumer</span></span>()&#123;</span><br><span class="line">    full.wait();</span><br><span class="line">    <span class="comment">//å¯¹ç›’å­å†…çš„èµ„æºè¿›è¡Œæ¶ˆè´¹</span></span><br><span class="line">    empty.signal();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">provider</span></span>()&#123;</span><br><span class="line">    empty.wait();</span><br><span class="line">    <span class="comment">//å‘ç›’å­ä¸­ç”Ÿäº§å†…å®¹</span></span><br><span class="line">    full.signal();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> ä»ä¸Šé¢çš„ä»£ç å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªä¿¡å·é‡è€Œéä¸€ä¸ªï¼ŒåŸå› ä¹Ÿå¾ˆç®€å•ï¼Œå½“ç›’å­ä¸ºç©ºçš„æ—¶å€™æ¶ˆè´¹è€…æ— æ³•è¿›è¡Œæ¶ˆè´¹ï¼Œå½“ç›’å­ä¸ºæ»¡çš„æ—¶å€™ç”Ÿäº§è€…æ— æ³•è¿›è¡Œç”Ÿäº§ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥è®©æ¶ˆè´¹è€…å¯¹<code>full</code>ä½œ<code>wait()</code>æ ‡å¿—ç©ºé—´å·²ç»è¢«é‡Šæ”¾ï¼ŒåŒæ ·ç”Ÿäº§è€…ä¹Ÿå¯ä»¥ä½¿ç”¨<code>full.signal()</code>å®ç°æ ‡å¿—ç›’å­ä¸­å·²ç»æ”¾å…¥äº†èµ„æºã€‚</p>
<h3 id="æƒ…æ™¯2å¤šæ¶ˆè´¹è€…-å•ç”Ÿäº§è€…-ç›’å­å®¹é‡ä¸ºn">æƒ…æ™¯2ï¼šå¤šæ¶ˆè´¹è€…-å•ç”Ÿäº§è€…-ç›’å­å®¹é‡ä¸ºn</h3>
<p>ç°åœ¨æˆ‘ä»¬å¼•å…¥äº†å¤šä¸ªæ¶ˆè´¹è€…ï¼Œæˆ‘ä»¬çŸ¥é“å½“ä»»ä½•æ¶ˆè´¹è€…åœ¨è®¿é—®ç›’å­çš„æ—¶å€™ç”Ÿäº§è€…éƒ½ä¸èƒ½æœç›’å­ä¸­æ”¾å…¥ä¸œè¥¿ï¼Œä½†æ˜¯æˆ‘ä»¬åªéœ€è¦å¯¹ä¸Šé¢çš„ä»£ç ç¨ä½œä¿®æ”¹å³å¯è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> full: Semaphore = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> empty: Semaphore = n;</span><br><span class="line"><span class="keyword">let</span> mutex: Semaphore = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> using: Semaphore = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> count: <span class="built_in">i32</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">consumer</span></span>()&#123;</span><br><span class="line">    full.wait();<span class="comment">//å½“ç›’ä¸­æœ‰èµ„æºçš„æ—¶å€™</span></span><br><span class="line">    mutex.wait();<span class="comment">//å½“ç”Ÿäº§è€…æœªå ç”¨(ç›’å­ç©ºé—²)</span></span><br><span class="line">    using.wait();</span><br><span class="line">    count += <span class="number">1</span>;</span><br><span class="line">    using.signal();</span><br><span class="line">    <span class="comment">//ä»æ­¤å¤„æ‰æ­£å¼å¼€å§‹æ¶ˆè´¹</span></span><br><span class="line">    empty.signal();</span><br><span class="line">    <span class="comment">//ä»ç›’å­ä¸­å–å‡ºèµ„æº</span></span><br><span class="line">    using.signal();</span><br><span class="line">    using.wait();</span><br><span class="line">    count -= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> count == <span class="number">0</span>&#123;</span><br><span class="line">        mutex.signal();<span class="comment">//å½“æ‰€æœ‰æ¶ˆè´¹è€…é€€å‡ºä¹‹åæ‰é‡Šæ”¾mutex</span></span><br><span class="line">    &#125;</span><br><span class="line">    using.signal();</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">provider</span></span>()&#123;</span><br><span class="line">    empty.wait();<span class="comment">//å½“ç›’å­è¿˜æœ‰ç©ºé—´çš„æ—¶å€™</span></span><br><span class="line">    mutex.wait();<span class="comment">//å½“æ¶ˆè´¹è€…æœªå ç”¨(ç›’å­ç©ºé—²)</span></span><br><span class="line">    <span class="keyword">if</span> count == <span class="number">0</span>&#123;</span><br><span class="line">        <span class="comment">//å‘ç›’å­ä¸­æ”¾å…¥ä¸œè¥¿</span></span><br><span class="line">        full.signal();</span><br><span class="line">    &#125;</span><br><span class="line">    mutex.signal();   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™é‡Œæˆ‘ä»¬åŠ å…¥äº†ä¸¤ä¸ªä¿¡å·é‡ï¼Œä¸€ä¸ªè´Ÿè´£æ§åˆ¶æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…åˆ†åˆ«å¯¹å…±äº«çš„ç›’å­çš„è®¿é—®ï¼Œå¦å¤–ä¸€ä¸ªç”¨äºæ§åˆ¶æ¶ˆè´¹è€…çš„è®¡æ•°å™¨ã€‚<br />
åœ¨ä¸Šé¢çš„ä»£ç ä¸­æˆ‘ä»¬å®é™…ä¸Šå°†å¤šä¸ªæ¶ˆè´¹è€…å’Œå•ä¸€ç”Ÿäº§è€…çš„é—®é¢˜æŠ½è±¡ä¸ºäº†ç¬¬ä¸€ä¸ªæ¶ˆè´¹è€…å’Œç”Ÿäº§è€…ä¹‹é—´çš„é—®é¢˜ï¼Œå½“æ¶ˆè´¹è€…å…¨éƒ¨å®Œæˆæ¶ˆè´¹å¹¶é€€å‡ºä¹‹åæˆ‘ä»¬æ‰ä¼šé‡Šæ”¾æ‰<code>mutex</code>ä½¿å¾—ç”Ÿäº§è€…å¯ä»¥å‘ç›’å­ä¸­æ”¾å…¥ä¸œè¥¿ã€‚åŒæ—¶åŠ¡å¿…è¦è®°ä½åœ¨å¤šè¿›(çº¿)ç¨‹å¯¹å…±äº«å˜é‡çš„æ“ä½œä¸­å¿…é¡»è¦ä½¿ç”¨ä¿¡å·é‡ç®¡ç†è®¿é—®çš„æƒé™ã€‚</p>
<h1 id="ç®¡ç¨‹">ç®¡ç¨‹</h1>
<p>ç®¡ç¨‹å®é™…ä¸Šæ˜¯ä¸€ç§å¯¹åŒæ­¥é”æŠ½è±¡å¾—åˆ°çš„æ•°æ®ç»“æ„ï¼Œä¸€èˆ¬æ¥è¯´ç®¡ç¨‹æœ‰ä»¥ä¸‹å‡ ç§ç‰¹å¾ - åŒæ—¶åªå…è®¸ä¸€ä¸ªè¿›(çº¿)ç¨‹åœ¨ç®¡ç¨‹ä¸­æ‰§è¡Œ - ä½¿ç”¨æ¡ä»¶å˜é‡ç®¡ç†ç®¡ç¨‹å†…è¿›(çº¿)ç¨‹çš„æ‰§è¡Œ - æ‹¥æœ‰ä¸€ä¸ª<strong>å…¥å£é˜Ÿåˆ—</strong>ç”¨äºè¿›(çº¿)ç¨‹æ’é˜Ÿè¿›è¡Œç®¡ç¨‹</p>
<p>å®é™…ä¸Šåœ¨æœ¬èœé¸¡çœ‹æ¥ç®¡ç¨‹çš„ç¡®æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œå°¤å…¶æ˜¯å…¶çš„åŸºæœ¬ç»“æ„å’Œå‡ ç§ä¸åŒçš„å®ç°æ–¹å¼ã€‚</p>
<h2 id="æ¡ä»¶å˜é‡">æ¡ä»¶å˜é‡</h2>
<p>ç®¡ç¨‹é‡‡ç”¨æ¡ä»¶å˜é‡æ§åˆ¶å·²ç»è¿›å…¥ç®¡ç¨‹çš„è¿›ç¨‹çš„æ‰§è¡Œï¼Œæ¡ä»¶å˜é‡æœ¬èº«çš„å„ç§ç‰¹å¾åˆå’Œä¿¡å·é‡æœ‰ç‚¹ç›¸ä¼¼ä½†æ˜¯å®Œå…¨ä¸åŒ - <code>wait()</code>æ“ä½œ - è¡¨ç¤ºå½“èµ„æºè¢«å ç”¨å¯¼è‡´è‡ªèº«é˜»å¡ï¼Œå¹¶å°†è‡ªèº«æ”¾å…¥ç­‰å¾…é˜Ÿåˆ— - æ‰§è¡Œ<code>wait()</code>åå°†ä¼šä»å…¥å£é˜Ÿåˆ—ä¸­å”¤é†’ä¸€ä¸ªæ–°çš„è¿›(çº¿)ç¨‹ - <code>signal()</code>æ“ä½œ - è¡¨ç¤ºå½“å‰èµ„æºå·²ç»è¢«ä½¿ç”¨å®Œæ¯•ï¼Œå”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªè¿›(çº¿)ç¨‹ - å½“ç­‰å¾…é˜Ÿåˆ—ä¸ºç©ºçš„æ—¶å€™<code>signal()</code>æ“ä½œæ²¡æœ‰æ„ä¹‰</p>
<p>è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°æ¡ä»¶å˜é‡å’Œä¿¡å·é‡çš„åŒºåˆ«ï¼Œå¯¹äºæ¡ä»¶å˜é‡æ¥è¯´ç”±äºè°ƒç”¨å…¶çš„è¿›(çº¿)ç¨‹å·²ç»åœ¨ç®¡ç¨‹ä¸­ï¼Œæ•…å…¶çš„<code>wait()</code>å’Œ<code>signal()</code>æ— éœ€æˆå¯¹ï¼Œä¸”åœ¨æ¡ä»¶å˜é‡æ‰§è¡Œå®Œæˆ<code>wait()</code>æ“ä½œåè¿›(çº¿)ç¨‹å¿…å®šé˜»å¡ï¼Œä½†æ˜¯å¯¹äºä¿¡å·é‡çš„<code>V()</code>æ“ä½œåˆ™ä¸ä¸€å®šä¼šé˜»å¡ã€‚ä¸”åœ¨æ¡ä»¶å˜é‡æ‰§è¡Œ<code>wait()</code>æ“ä½œæˆ–<code>signal()</code>çš„æ—¶å€™å·²ç»é»˜è®¤è·å¾—äº†äº’æ–¥é”ã€‚</p>
<p>å…‰è°ˆæ¦‚å¿µæ„Ÿè§‰ç®¡ç¨‹æœ¬èº«è¿˜æ˜¯æ¯”è¾ƒæ™¦æ¶©çš„ï¼Œä¸‹é¢è¿˜æ˜¯ä¼šç”¨è‘—åçš„è¯»è€…-å†™è€…é—®é¢˜è®¨è®ºç®¡ç¨‹</p>
<h2 id="ä½¿ç”¨ç®¡ç¨‹å®ç°è¯»è€…-å†™è€…é—®é¢˜">ä½¿ç”¨ç®¡ç¨‹å®ç°è¯»è€…-å†™è€…é—®é¢˜</h2>
<p>é€šè¿‡ä½¿ç”¨ç®¡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¯»è€…-å†™è€…é—®é¢˜åŒ…è£…ä¸ºä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç±» <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Database</span></span>&#123;</span><br><span class="line">    lock: Lock,</span><br><span class="line">    AC: <span class="built_in">i32</span>, <span class="comment">//å·²ç»æ¿€æ´»çš„è¯»è€…</span></span><br><span class="line">    AP: <span class="built_in">i32</span>, <span class="comment">//å·²ç»æ¿€æ´»çš„å†™è€…</span></span><br><span class="line">    WC: <span class="built_in">i32</span>, <span class="comment">//æ­£åœ¨ç­‰å¾…çš„è¯»è€…</span></span><br><span class="line">    WP: <span class="built_in">i32</span>, <span class="comment">//æ­£åœ¨ç­‰å¾…çš„å†™è€…</span></span><br><span class="line">    buffer: <span class="built_in">i32</span>,</span><br><span class="line">    Condition okToRead, okToWrite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Database&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">start_consume</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>)&#123;</span><br><span class="line">        <span class="keyword">self</span>.lock.aquire();</span><br><span class="line">        <span class="keyword">if</span> (WP + AP) &gt; <span class="number">0</span>&#123; <span class="comment">// ç›¸å½“äºè¿˜æœ‰å†™è€…å¤„äºæ¿€æ´»çŠ¶æ€çš„æ—¶å€™</span></span><br><span class="line">            WC++;</span><br><span class="line">            okToRead.wait(<span class="keyword">mut</span> <span class="keyword">self</span>.lock); <span class="comment">// å°†è‡ªå·±é˜»å¡</span></span><br><span class="line">            WC--;</span><br><span class="line">        &#125;</span><br><span class="line">        AC++;<span class="comment">//æ­¤å¤„ä¸ºæœªé˜»å¡æˆ–è€…è¢«å”¤é†’</span></span><br><span class="line">        <span class="keyword">self</span>.lock.release();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">end_consume</span></span>(&amp;<span class="keyword">self</span>)&#123;</span><br><span class="line">        <span class="keyword">self</span>.lock.aquire();</span><br><span class="line">        AC--;</span><br><span class="line">        <span class="keyword">if</span> AC == <span class="number">0</span> &amp;&amp; WP &gt; <span class="number">0</span>&#123;</span><br><span class="line">            okToWrite.signal(); <span class="comment">// å½“æ¿€æ´»çš„è¯»è€…é€€å‡ºçš„æ—¶å€™å”¤é†’é˜»å¡åœ¨é˜Ÿåˆ—ä¸­çš„å†™è€…</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">self</span>.lock.release();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">start_produce</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>)&#123;</span><br><span class="line">        <span class="keyword">self</span>.lock.aquire();</span><br><span class="line">        <span class="keyword">if</span> (WC + AC) &gt; <span class="number">0</span>&#123;</span><br><span class="line">            WP++;</span><br><span class="line">            okToWrite.wait(<span class="keyword">mut</span> <span class="keyword">self</span>.lock); <span class="comment">// åŒæ ·å½“ä»»ä½•è¯»è€…åœ¨æ‰§è¡Œçš„æ—¶å€™å°†è‡ªèº«é˜»å¡</span></span><br><span class="line">            WP--;</span><br><span class="line">        &#125;</span><br><span class="line">        AP++; <span class="comment">//æ­¤å¤„ä¸ºæœªé˜»å¡æˆ–è€…è¢«å”¤é†’</span></span><br><span class="line">        <span class="keyword">self</span>.lock.release();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">end_produce</span></span>(&amp;<span class="keyword">self</span>)&#123;</span><br><span class="line">        <span class="keyword">self</span>.lock.aquire();</span><br><span class="line">        AP--;</span><br><span class="line">        <span class="keyword">if</span> AP == <span class="number">0</span> &amp;&amp; WC &gt; <span class="number">0</span>&#123;</span><br><span class="line">            okToRead.signal(); <span class="comment">// å½“æ¿€æ´»çš„å†™è€…é€€å‡ºçš„æ—¶å€™å”¤é†’æ­£åœ¨æ’é˜Ÿçš„è¯»è€…çº¿ç¨‹</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">self</span>.lock.release();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">read</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>)&#123;</span><br><span class="line">        <span class="keyword">self</span>.start_consume();</span><br><span class="line">        <span class="comment">// do consume</span></span><br><span class="line">        <span class="keyword">self</span>.end_consume();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">write</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>)&#123;</span><br><span class="line">        <span class="keyword">self</span>.start_produce();</span><br><span class="line">        <span class="comment">// do produce</span></span><br><span class="line">        <span class="keyword">self</span>.end_produce();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†å››ä¸ªæ•´å½¢å˜é‡ã€ä¸€ä¸ªé”å’Œä¸¤ä¸ªæ¡ä»¶å˜é‡å®Œæˆäº†å¯¹æ¶ˆè´¹è€…-ç”Ÿäº§è€…çš„æ§åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹äºè¯»å’Œå†™æ“ä½œæˆ‘ä»¬å‡ä½¿ç”¨ä¸¤ä¸ªå‡½æ•°æ¥å®Œæˆå…¶çš„åŒæ­¥æ§åˆ¶ã€‚</p>
]]></content>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤šé‡èƒŒåŒ…ç³»åˆ—é—®é¢˜</title>
    <url>/2021/05/23/%E5%A4%9A%E9%87%8D%E8%83%8C%E5%8C%85%E7%B3%BB%E5%88%97%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h2 id="é—®é¢˜ç®€ä»‹">é—®é¢˜ç®€ä»‹</h2>
<p>å¤šé‡èƒŒåŒ…é—®é¢˜ç›¸å¯¹äºå®Œå…¨èƒŒåŒ…é—®é¢˜æœ€å¤§çš„åŒºåˆ«åœ¨äºå¤šé‡èƒŒåŒ…é—®é¢˜ä¸­æ¯ä¸ªç‰©å“çš„æ•°é‡æ˜¯æœ‰é™çš„ï¼Œä½†æ˜¯äºŒè€…çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ç›¸åŒï¼Œæ•…å…¶å¯ä»¥ç”±å®Œå…¨èƒŒåŒ…é—®é¢˜æ”¹å†™è€Œæ¥ã€‚</p>
<p>ä½†æ˜¯ç›´æ¥æ”¹å†™è€Œæ¥çš„æœ´ç´ ç‰ˆæœ¬çš„å®Œå…¨èƒŒåŒ…é—®é¢˜æœ¬èº«æ— æ³•åº”å¯¹è¾ƒå¤§çš„æ•°æ®èŒƒå›´ï¼Œæ•…éœ€è¦é€‚å½“è¿›è¡Œä¼˜åŒ–ï¼Œæœ¬æ–‡ä¾¿æ˜¯é’ˆå¯¹è¯¥ç±»å¸¸è§„çš„å¤šé‡èƒŒåŒ…é—®é¢˜è¿›è¡Œè§£ç­”ã€‚</p>
<span id="more"></span>
<h2 id="acwing-5.å¤šé‡èƒŒåŒ…é—®é¢˜ii">AcWing 5.å¤šé‡èƒŒåŒ…é—®é¢˜II</h2>
<p>å½“æ•°æ®èŒƒå›´è¾ƒå°çš„æ—¶å€™å¯ä»¥è€ƒè™‘è¿›è¡Œ<strong>äºŒè¿›åˆ¶ä¼˜åŒ–</strong>ï¼Œå³å°†ä¸€ç»„nä¸ªç‰©å“æ‹†åˆ†ä¸º1ä¸ªã€2ä¸ªã€4ä¸ª...ï¼Œå°†é—®é¢˜è½¬åŒ–ä¸ºäº†01èƒŒåŒ…é—®é¢˜ï¼Œå³å¯ä»¥è§£å†³ã€‚</p>
<p>è¯¥é—®é¢˜çš„åŸºæœ¬åŸç†åœ¨äº2çš„kæ¬¡æ–¹å¯ä»¥è¡¨è¾¾å‡º<span class="math inline">\(0\)</span>åˆ°<span class="math inline">\(2^k - 1\)</span>èŒƒå›´å†…çš„æ‰€æœ‰æ•°å­—ï¼Œæ•…å¯ä»¥å¾—åˆ°è¯¥ç§åˆ’åˆ†æ–¹å¼ã€‚</p>
<h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">50010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, V, idx;</span><br><span class="line"><span class="keyword">int</span> cnt[N], w[N], v[N], f[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; V;</span><br><span class="line">    <span class="keyword">while</span>(n --)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> tc, tw, tv;</span><br><span class="line">        cin &gt;&gt; tv &gt;&gt; tw &gt;&gt; tc;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> amt = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(amt &lt;= tc)</span><br><span class="line">        &#123;</span><br><span class="line">            tc -= amt;</span><br><span class="line">            w[idx] = tw * amt;</span><br><span class="line">            v[idx] = tv * amt;</span><br><span class="line">            amt &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">            idx ++;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (tc != <span class="number">0</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            w[idx] = tw * tc;</span><br><span class="line">            v[idx] = tv * tc;</span><br><span class="line">            idx ++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; idx; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = V; j &gt;= v[i]; --j)</span><br><span class="line">        &#123;</span><br><span class="line">            f[j] = <span class="built_in">max</span>(f[j], f[j - v[i]] + w[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; f[V];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="acwing-6.å¤šé‡èƒŒåŒ…é—®é¢˜3">AcWing 6.å¤šé‡èƒŒåŒ…é—®é¢˜3</h2>
<p>è¯¥é—®é¢˜ä¸­æ•°æ®è§„æ¨¡è¿›ä¸€æ­¥æ‰©å¤§ï¼ŒåŸå§‹çš„æ–¹æ³•å·²ç»æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œæ•…æ­¤æ—¶æˆ‘ä»¬å¯ä»¥å°è¯•å»å¯»æ‰¾è§„å¾‹å»åˆ†æè¯¥é—®é¢˜ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬å¯ä»¥å°†å„ä¸ªçŠ¶æ€åˆ—å‡ºè¿›è¡Œè§‚å¯Ÿï¼Œæœ‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">f[i, j] 		= max(f[i - 1, j], f[i - 1, j - v] + w, f[i - 1, j - 2v] + 2w ... f[i - 1, j - sv] + sw)</span><br><span class="line">f[i, j - v] = max(             f[i - 1, j - v],     f[i - 1, j - 2v] + w ...  f[i - 1, j - sv] + (s - 1)w + f[i - 1, j - (s + 1)v] + sw)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å‡è®¾å°†ç‰©å“å…¨éƒ¨é€‰ä¸­åä¾æ—§ä¸ä¼šè¶…å‡ºå®¹é‡çš„æœ€å¤§é™åˆ¶ï¼Œæ­¤æ—¶<code>f[i, j]</code>ä¸<code>f[i, j - v]</code>å¹¶ä¸èƒ½å¦‚åŒå®Œå…¨èƒŒåŒ…é—®é¢˜é‚£æ ·å¯¹é½ï¼Œæ•…æˆ‘ä»¬éœ€è¦è€ƒè™‘å…¶ä»–çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>å½“ç„¶ï¼Œå½“æˆ‘ä»¬åˆ—å‡ºå‰©ä¸‹çš„æ¯ä¸€é¡¹åæˆ‘ä»¬å¯ä»¥å‘ç°ä¸€ä¸ªè§„å¾‹ï¼Œå³è¯¥é—®é¢˜å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ»‘åŠ¨çª—å£æ±‚æœ€å¤§å€¼é—®é¢˜ï¼Œå³æŒ‰ç…§ä¸Šé¢çš„å¯¹é½æ–¹å¼å¯ä»¥çœ‹å‡ºå®é™…ä¸Š<code>f[i, j]</code>é™¤å»ç¬¬ä¸€é¡¹ä¹‹åå‰©ä½™é¡¹å®é™…ä¸Šå¯ä»¥çœ‹ä½œæ˜¯<code>f[i, j - v]</code>å¯¹åº”çš„çª—å£å‘å›ºå®šæ–¹å‘æ»‘åŠ¨äº†ä¸€æ­¥ã€‚æ•…æ ¹æ®è¿™ä¸ªç‰¹æ€§æˆ‘ä»¬ä¾¿å¯ä»¥å®Œæˆè¯¥é¢˜ã€‚å¯ä»¥è€ƒè™‘å°†ä¸Šé¢çš„<code>-</code>æ›´æ¢ä¸º<code>+</code>ï¼Œå³ä»å°åˆ°å¤§é€’å¢ã€‚</p>
<p>ä½†æ˜¯æ­¤æ—¶æˆ‘ä»¬è¿˜éœ€è¦è§£å†³å…³äºå•è°ƒé˜Ÿåˆ—ä¸­åç§»é‡çš„é—®é¢˜ï¼Œåœ¨åŸå§‹çš„å¼å­ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰é¡¹åé¢éƒ½å¸¦ç€ä¸€ä¸ªåç§»é‡ï¼Œè€Œåœ¨å•è°ƒé˜Ÿåˆ—è½¬æ¢çš„è¿‡ç¨‹ä¸­å°±ä¼šå‡ºç°å•è°ƒé˜Ÿåˆ—æœ€å‰æ–¹çš„é¡¹æ¯æ¬¡éƒ½éœ€è¦+wçš„æƒ…å†µï¼Œå¦‚ä¸‹æ‰€ç¤º</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">f[i][j] = max(f[i - 1][j])</span><br><span class="line">f[i][j + v] = max(f[i - 1][j] + w, f[i - 1][j + v])</span><br><span class="line">f[i][j + 2v] = max(f[i - 1][j] + 2w, f[i - 1][j + v] + w, f[i - 1][j + 2v])</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>æ•…å¯ä»¥è€ƒè™‘è½¬æ¢ä¸º</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">f[i, j] = max(f[i - 1, j] - sw, s[i - 1, j - v] - (s - 1)w, ..., f[i - 1, j - sv]) + sw</span><br></pre></td></tr></table></figure>
<p>å³æ­¤æ—¶æˆ‘ä»¬çš„å•è°ƒé˜Ÿåˆ—å¯ä»¥è½¬æ¢ä¸ºé’ˆå¯¹è½¬æ¢å<code>max()</code>å‡½æ•°å†…çš„å„é¡¹æ±‚å•è°ƒé˜Ÿåˆ—ï¼Œç„¶åå°†æ€»ä½“çš„åç§»é‡åŠ å›ã€‚</p>
<p>å®é™…ä¸Šæœ€åæˆ‘ä»¬çš„å¼å­å°±è¢«è½¬æ¢æˆäº†è¿™æ ·</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">f[i][j]      = max(f[i - 1][j])</span><br><span class="line">f[i][j + v]  = max(f[i - 1][j], f[i - 1][j + v] - w) + w</span><br><span class="line">f[i][j + 2v] = max(f[i - 1][j], f[i - 1][j + v] - w, f[i - 1][j + 2v] - 2w) + 2w;</span><br><span class="line">...</span><br><span class="line">f[i][j + nv] = max(f[i - 1][j + (n - s)v], f[i - 1][j + (n - s + 1)v] - w, ... f[i - 1][j + nv] - sv) + sv</span><br></pre></td></tr></table></figure>
<h3 id="ä»£ç å®ç°-1">ä»£ç å®ç°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">20010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> f[N], g[N], q[N];</span><br><span class="line"><span class="keyword">int</span> v, w, s;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; v &gt;&gt; w &gt;&gt; s;</span><br><span class="line">        <span class="built_in">memcpy</span>(g, f, <span class="keyword">sizeof</span> f);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; v; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> hh = <span class="number">0</span>, tt = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = j; k &lt;= m; k += v)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (hh &lt;= tt &amp;&amp; q[hh] &lt; k - s * v) hh ++ ; <span class="comment">// æ³¨æ„è¿™é‡Œçš„kä»£è¡¨äº†æ€»ä½“ç§¯ï¼Œå³å½“k - s * vå¤§äºäº†é˜Ÿå¤´ä¿å­˜çš„ä½“ç§¯æ—¶å°†ä¼šå¼¹å‡ºé˜Ÿå¤´</span></span><br><span class="line">                <span class="keyword">while</span> (hh &lt;= tt &amp;&amp; g[q[tt]] - (q[tt] - j) / v * w &lt;= g[k] - (k - j) / v * w) tt -- ; <span class="comment">// å°†é˜Ÿåˆ—å°¾éƒ¨æ‰€æœ‰å°äºå½“å‰å€¼çš„å…ƒç´ ç»Ÿç»Ÿåˆ é™¤</span></span><br><span class="line">                q[ ++ tt] = k;</span><br><span class="line">                f[k] = g[q[hh]] + (k - q[hh]) / v * w; <span class="comment">// å°†åç§»é‡åŠ å›</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; f[m];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•å­¦ä¹ </tag>
        <tag>AcWing</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­»é”ä¸é“¶è¡Œå®¶ç®—æ³•</title>
    <url>/2020/11/19/%E6%AD%BB%E9%94%81%E4%B8%8E%E9%93%B6%E8%A1%8C%E5%AE%B6%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<h1 id="æ­»é”">æ­»é”</h1>
<p>æ­»é”ä½œä¸ºå¤šè¿›(çº¿)ç¨‹å¼€å‘ä¸­ç»å¸¸é‡åˆ°çš„é—®é¢˜ï¼Œå…¶é€šå¸¸ä½“ç°ä¸ºå¤šä¸ªè¿›ç¨‹å’Œçº¿ç¨‹åŒæ—¶å¤„äºé˜»å¡çŠ¶æ€å¹¶ä¸”åœ¨æ²¡æœ‰ä»»ä½•å¤–åŠ›å¹²æ‰°çš„æƒ…å†µä¸‹å®Œå…¨æ— æ³•è§£é™¤è¿™ç§çŠ¶æ€çš„æƒ…å†µã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªè‘—åçš„åœºæ™¯æ¥å…·ä½“åœ°ç†è§£æ­»é”çš„æ¦‚å¿µã€‚</p>
<span id="more"></span>
<h2 id="å“²å­¦å®¶ç”¨é¤é—®é¢˜">å“²å­¦å®¶ç”¨é¤é—®é¢˜</h2>
<p>å“²å­¦å®¶ç”¨é¤é—®é¢˜ä¸»è¦æ¨¡å‹åœ¨ä¸€ä¸ª<strong>åœ†æ¡Œ</strong>ä¸Šåç€nä½å“²å­¦å®¶ï¼Œè€Œæ¯ä½å“²å­¦å®¶çš„é—´éš”å¤„å‡æ”¾ç€ä¸€åªç­·å­ï¼Œæ‰€æœ‰çš„å“²å­¦å®¶å‡å¤„æ‹¥æœ‰è¿›é¤å’Œæ€è€ƒä¸¤ç§çŠ¶æ€ï¼Œå…¶ä¸­å¦‚æœå¸Œæœ›è¿›å…¥ç”¨é¤çŠ¶æ€åˆ™éœ€è¦åŒæ—¶è·å¾—å·¦å³ä¸¤è¾¹çš„ç­·å­ã€‚<br />
ç°åœ¨å‡è®¾æ€»å…±æœ‰5ä¸ªå“²å­¦å®¶ï¼Œå¯¹åº”çš„å°±æ˜¯5åªç­·å­ï¼Œç”»æˆå›¾å°±å¦‚ä¸‹æ‰€ç¤º <img src="https://i.loli.net/2020/11/19/5BZeJAtpYKHfzuS.png" alt="image.png" /> è¿™å¼ å›¾æ¥è‡ªäºç»´åŸºç™¾ç§‘<a href="https://zh.wikipedia.org/wiki/%E5%93%B2%E5%AD%A6%E5%AE%B6%E5%B0%B1%E9%A4%90%E9%97%AE%E9%A2%98">å“²å­¦å®¶å°±é¤é—®é¢˜</a>,æ•…ç­·å­å˜æˆäº†å‰å­ï¼Œå°†å°±çœ‹çœ‹å§(ç¬‘)</p>
<h3 id="å“²å­¦å®¶ç”¨é¤é—®é¢˜ä¸æ­»é”">å“²å­¦å®¶ç”¨é¤é—®é¢˜ä¸æ­»é”</h3>
<p>ç°åœ¨æˆ‘ä»¬è¦åœ¨è¿™ä¸ªé—®é¢˜ä¸­å¼•å…¥æ­»é”çš„é—®é¢˜ï¼Œæˆ‘ä»¬å‡è®¾æ‰€æœ‰çš„å“²å­¦å®¶åŒæ—¶å¸Œæœ›å°±é¤ï¼Œæ­¤æ—¶ä»–ä»¬åŒæ—¶æ‹¿èµ·äº†ä»–ä»¬å·¦ä¾§çš„ç­·å­(å‰å­)ï¼Œç”±äºè¿™ç¾¤å“²å­¦å®¶éƒ½æ˜¯è‡ªç§è‡ªåˆ©çš„ï¼Œä»–ä»¬åœ¨æˆåŠŸå°±é¤ä¹‹å‰<strong>ä¸ä¼šæ”¾å¼ƒ</strong>æ‰‹ä¸Šçš„ç­·å­(å‰å­)ï¼Œæ•…æ¥ä¸‹æ¥ä»–ä»¬åœ¨è¯·æ±‚è‡ªå·±å³è¾¹çš„å‰å­çš„æ—¶å€™æ‰€æœ‰çš„å“²å­¦å®¶éƒ½ä¸ä¼šè·å¾—åœ¨ä»–ä»¬å³æ‰‹çš„ç­·å­(å‰å­)ï¼Œå› ä¸ºå³è¾¹çš„ç­·å­(å‰å­)å‡è¢«ä»–ä»¬å„è‡ªå³è¾¹çš„å“²å­¦å®¶å–èµ°äº†ï¼Œæ‰€ä»¥ä»è¿™ä¸ªæ—¶åˆ»å¼€å§‹æ‰€æœ‰çš„å“²å­¦å®¶å‡æ— æ³•å°±é¤ï¼Œç”±äºä»–ä»¬éƒ½ä¸æ„¿æ„æ”¾å¼ƒæ‰‹ä¸Šå·²ç»è·å¾—çš„ç­·å­(å‰å­)ï¼Œæ‰€ä»¥æ²¡æœ‰äººä¼šæ‰“ç ´è¿™ä¸ªåƒµå±€ï¼Œä¹Ÿå°±æ˜¯è¯´ç°åœ¨å‘ç”Ÿäº†<strong>æ­»é”</strong></p>
<h3 id="å¸¸è§„çš„è§£å†³æ–¹æ¡ˆ">å¸¸è§„çš„è§£å†³æ–¹æ¡ˆ</h3>
<p>ç”±äºå“²å­¦å®¶é—®é¢˜æ¶‰åŠåˆ°çš„è¯·æ±‚çš„èµ„æºç§ç±»å•ä¸€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åœ¨ä¹‹å‰å­¦åˆ°çš„ä¿¡å·é‡æœºåˆ¶è½»æ¾åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h4 id="æœåŠ¡ç”Ÿæœºåˆ¶">æœåŠ¡ç”Ÿæœºåˆ¶</h4>
<p>ç¬¬ä¸€ç§æ–¹æ³•å°±æ˜¯å¼•å…¥ä¸€ä¸ªæœåŠ¡ç”Ÿï¼Œå½“å“²å­¦å®¶éœ€è¦è¿›é¤çš„æ—¶å€™ä»–ä»¬å°†ä¸ä¼šè‡ªå·±æ‹¿èµ·è‡ªå·±çš„ç­·å­(å‰å­)ï¼Œè€Œæ˜¯ç”±æœåŠ¡ç”Ÿæ£€æŸ¥ä»–ä¸¤ä¾§æ˜¯å¦æœ‰ç­·å­(å‰å­)ï¼Œå¦‚æœéƒ½æœ‰çš„æ—¶å€™ä¾¿ç”±æœåŠ¡ç”Ÿæ‹¿èµ·ä¸¤ä¾§çš„é¤å…·äº¤ç»™è¿™ä½å“²å­¦å®¶ï¼Œè¿™æ ·å®ç°äº†åœ¨è¯·æ±‚èµ„æºä¹‹å‰å¯¹èµ„æºè¿›è¡Œæ£€æŸ¥ï¼Œé˜²æ­¢å‡ºç°æ­»é”çš„æƒ…å†µã€‚ æˆ‘ä»¬å¯ä»¥ç”¨ä¼ªä»£ç å®ç°å¦‚ä¸‹ï¼Œæˆ‘ä»¬å°†ä¼šå¯¹å“²å­¦å®¶è¿›è¡Œç¼–å·ï¼Œé¡ºæ—¶é’ˆ0-4ï¼Œå…¶ä¸­0å·å“²å­¦å®¶å·¦è¾¹çš„ç­·å­è§†ä½œ0å·ç­·å­ï¼Œå³è¾¹ä¸º1å·ï¼Œä¾æ¬¡é€’å¢ã€‚</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> waiter: Semaphore = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> fork: <span class="built_in">Vec</span>&lt;Semaphore&gt; = [<span class="number">1</span>; <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">philosopher</span></span>(code:<span class="built_in">i32</span>)&#123;</span><br><span class="line">    waiter.wait();</span><br><span class="line">    <span class="keyword">let</span> ready = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> fork[left].available() and fork[right].available()&#123;</span><br><span class="line">        fork[left].wait();</span><br><span class="line">        fork[right].wait();</span><br><span class="line">    &#125;</span><br><span class="line">    waiter.signal();</span><br><span class="line">    <span class="keyword">if</span> ready&#123;</span><br><span class="line">        <span class="comment">//è¿›é¤</span></span><br><span class="line">        fork[left].signal();</span><br><span class="line">        fork[right].signal():</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//å·¦å³ç­·å­è¢«å ç”¨ï¼Œæ— æ³•å°±é¤</span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è½®æµè¿›é¤æœºåˆ¶">è½®æµè¿›é¤æœºåˆ¶</h4>
<p>ç¬¬äºŒç§æ–¹æ³•ä¾¿æ˜¯è¦æ±‚æ¯æ¬¡åªèƒ½ç”±ä¸€ä¸ªå“²å­¦å®¶è¦æ±‚è¿›é¤ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æŸä¸ªå“²å­¦å®¶å®£å¸ƒè‡ªå·±è¦è¿›é¤çš„æ—¶å€™å…¶ä»–æ‰€æœ‰äººéƒ½ä¸èƒ½å¯¹è‡ªå·±èº«è¾¹çš„é¤å…·è¿›è¡Œè¯·æ±‚ï¼Œåªèƒ½ç”±è¦æ±‚è¿›é¤çš„è¿™ä½å“²å­¦å®¶æ‹¿èµ·è‡ªå·±ä¸¤ä¾§çš„é¤å…·è¿›è¡Œå°±é¤ï¼Œå°±é¤å®Œæ¯•ä¹‹åå…¶ä»–äººæ‰èƒ½å†æ¬¡å®£å¸ƒè‡ªå·±è¦å°±é¤ã€‚</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> house: Semaphore = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> fork: <span class="built_in">Vec</span>&lt;<span class="built_in">i32</span>&gt; = [<span class="number">1</span>; <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">philosopher</span></span>(code: <span class="built_in">i32</span>)&#123;</span><br><span class="line">    house.wait();</span><br><span class="line">    fork[left] = <span class="number">0</span>;</span><br><span class="line">    fork[right] = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//å°±é¤</span></span><br><span class="line">    fork[left] = <span class="number">1</span>;</span><br><span class="line">    fork[right] = <span class="number">1</span>;</span><br><span class="line">    house.signal();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="æ­»é”çš„æ¦‚å¿µ">æ­»é”çš„æ¦‚å¿µ</h2>
<p>ä»ä¸Šé¢çš„é—®é¢˜ï¼Œç›¸ä¿¡è¯»è€…ä¹Ÿå¯¹æ­»é”æœ‰äº†ä¸€å®šçš„æ¦‚å¿µï¼Œå¯¹äºæ­»é”æ¥è¯´å…¶è‡ªèº«çš„äº§ç”Ÿå®é™…ä¸Šæœ‰å››ä¸ªå¿…è¦æ¡ä»¶ï¼Œè€Œåç»­æ¢è®¨çš„ç³»ç»Ÿæ€§çš„å¯¹æ­»é”çš„è§£å†³åŒæ ·åŸºäºè¿™å››ä¸ªå¿…è¦æ¡ä»¶è¿›è¡Œ</p>
<ul>
<li>äº’æ–¥æ¡ä»¶ï¼šå¤šä¸ªçº¿ç¨‹ä¹‹é—´è¯·æ±‚çš„èµ„æºå…·æœ‰äº’æ–¥æ€§</li>
<li>ä¸å¯å‰¥å¤ºæ¡ä»¶ï¼šçº¿ç¨‹è¯·æ±‚çš„èµ„æºæ˜¯ä¸å¯å‰¥å¤ºçš„</li>
<li>æŒæœ‰è¯·æ±‚æ¡ä»¶ï¼šå½“ä¸€ä¸ªçº¿ç¨‹æŒæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºçš„åŒæ—¶å…¶ä¼šå»è¯·æ±‚å…¶ä»–çº¿ç¨‹æ‰€å æœ‰çš„èµ„æºï¼Œå¼•èµ·é˜»å¡</li>
<li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶å‘ç”ŸæŒæœ‰ç­‰å¾…ï¼ŒåŒæ—¶è¿™äº›çº¿ç¨‹æŒæœ‰çš„èµ„æºä¸è¯·æ±‚çš„èµ„æºå¯ä»¥å½¢æˆä¸€ä¸ªç¯ã€‚</li>
</ul>
<h2 id="æ­»é”çš„è§£å†³">æ­»é”çš„è§£å†³</h2>
<h3 id="é¢„é˜²æ­»é”">é¢„é˜²æ­»é”</h3>
<p>é¢„é˜²æ­»é”å®é™…ä¸Šæ˜¯æœ€ä½æ•ˆï¼Œæœ€æš´åŠ›ï¼Œä½†æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼Œå…¶é€šè¿‡åˆ†åˆ«ç ´åæ­»é”çš„å››ç§æ¡ä»¶å®Œæˆå¯¹æ­»é”çš„é¢„é˜²ã€‚</p>
<ul>
<li>äº’æ–¥æ¡ä»¶ï¼šå…¶ä½œä¸ºç³»ç»Ÿçš„åŸºæœ¬ç‰¹å¾ï¼Œ<strong>æ— æ³•ç ´å</strong></li>
<li>æŒæœ‰è¯·æ±‚æ¡ä»¶ï¼šè¦æ±‚è¿›ç¨‹åœ¨åˆ›å»ºæ—¶éœ€è¦ç”³è¯·å…¨éƒ¨çš„èµ„æºï¼Œå¦‚æœä¸æ»¡è¶³çš„è¯ç›´æ¥é˜»æ­¢è¿›ç¨‹çš„åˆ›å»º</li>
<li>ä¸å¯å‰¥å¤ºæ¡ä»¶ï¼šè¦æ±‚è¿›ç¨‹åœ¨å…¨éƒ¨èµ„æºå…¨éƒ¨ç”³è¯·æˆåŠŸåæ‰èƒ½æ‰§è¡Œï¼Œå¦åˆ™å°†è¿›ç¨‹é˜»å¡</li>
<li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šæŒ‰åºç”³è¯·ï¼Œç›¸å½“äºå¯¹æ‰€æœ‰èµ„æºè¿›è¡Œç¼–å·ï¼Œè¿›ç¨‹åœ¨ç”³è¯·èµ„æºçš„æ—¶å€™å¿…é¡»ä¸¥æ ¼æŒ‰ç…§åºå·è¿›è¡Œç”³è¯·</li>
</ul>
<h3 id="é¿å…æ­»é”">é¿å…æ­»é”</h3>
<p>é¿å…æ­»é”ç›¸å¯¹äºé¢„é˜²æ­»é”æ¥è¯´æ€§èƒ½æ›´å¥½ï¼Œå…¶çš„åŸºæœ¬æµç¨‹ä¸ºåˆ¤æ–­ç”³è¯·èµ„æºçš„æ—¶å€™æ˜¯å¦æœ‰æ­»é”é£é™©ï¼Œå¦‚æœæ²¡æœ‰çš„è¯åˆ™æˆäºˆèµ„æºï¼Œå¦åˆ™é˜»å¡è¿›ç¨‹ç›´åˆ°èµ„æºå¯ç”¨ã€‚</p>
<h4 id="å®‰å…¨ä¸ä¸å®‰å…¨çš„åˆ’åˆ†">å®‰å…¨ä¸ä¸å®‰å…¨çš„åˆ’åˆ†</h4>
<p>å½“ç³»ç»ŸæŒ‰ç…§ä¸€å®šçš„é¡ºåºè°ƒåº¦è¿›ç¨‹ï¼Œå¦‚<span class="math inline">\(P_1, P_2, P_3...P_n\)</span>ï¼Œå¯¹äºå…¶ä¸­ä»»ä½•ä¸€ä¸ªè¿›ç¨‹<span class="math inline">\(P_i\)</span>å‡åº”å½“æ»¡è¶³å…¶æ‰€è¯·æ±‚èµ„æºçš„æœ€å¤§éœ€æ±‚ï¼Œæ­¤æ—¶åˆ™è§†ä¸ºå®‰å…¨ï¼Œå¦åˆ™è§†ä¸ºä¸å®‰å…¨ã€‚<br />
æ­¤æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦æ„å»ºä¸€ä¸ªç®—æ³•ç”¨æ¥è®¡ç®—å¾—åˆ°è¿™æ ·ä¸€ä¸ªè¿›ç¨‹åºåˆ—ã€‚åŒæ—¶ç”±äºç³»ç»Ÿä¸­çš„è¿›ç¨‹å®é™…ä¸Šæ˜¯ä¸æ–­åœ°åœ¨ç”³è¯·å’Œé‡Šæ”¾èµ„æºçš„ï¼Œæ•…å®é™…ä¸Šç³»ç»Ÿçš„å®‰å…¨å’Œä¸å®‰å…¨å…¶å®æ˜¯åœ¨åå¤åˆ‡æ¢çš„ã€‚</p>
<h4 id="é“¶è¡Œå®¶ç®—æ³•">é“¶è¡Œå®¶ç®—æ³•</h4>
<p>é“¶è¡Œå®¶ç®—æ³•ä¾¿æ˜¯ä¸€ç§è‘—åçš„ç”¨äºå®ç°é¿å…æ­»é”çš„ç®—æ³•ã€‚</p>
<h5 id="æ•°æ®ç»“æ„">æ•°æ®ç»“æ„</h5>
<ul>
<li>å¯ç”¨çš„èµ„æºé‡ï¼š<code>Available</code>ï¼Œé•¿åº¦ä¸ºnçš„å‘é‡</li>
<li>æœ€å¤§éœ€æ±‚çŸ©é˜µï¼š<code>Max</code>ï¼Œnè¡Œmåˆ—çš„çŸ©é˜µ</li>
<li>åˆ†é…çŸ©é˜µï¼š<code>Allocation</code>ï¼Œnè¡Œmåˆ—çš„çŸ©é˜µ</li>
<li>éœ€æ±‚çŸ©é˜µï¼š<code>Need</code>ï¼Œnè¡Œmåˆ—çš„çŸ©é˜µ</li>
<li>èµ„æºè¯·æ±‚å‘é‡ï¼š<code>Request</code>ï¼Œé•¿åº¦ä¸ºmçš„å‘é‡ï¼Œä¸”<code>Request_i[j]</code>è¡¨ç¤ºiè¿›ç¨‹å¯¹jèµ„æºçš„éœ€æ±‚é‡</li>
</ul>
<p>å…¶ä¸­<code>Max = Allocation + Need</code></p>
<h5 id="ç®—æ³•è¿‡ç¨‹">ç®—æ³•è¿‡ç¨‹</h5>
<p>å½“è¿›ç¨‹iæå‡ºäº†Request_içš„æ—¶å€™ï¼Œå°†ä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œ</p>
<ol type="1">
<li>è‹¥<code>Request_i &gt; Need[i]</code>ï¼Œå‡ºé”™</li>
<li>è‹¥<code>Request_i &gt; Available</code>ï¼Œè¿›ç¨‹è¢«é˜»å¡</li>
<li>å½“ä¸Šè¿°ä¸¤æ­¥å‡é€šè¿‡ï¼Œåˆ™å¼€å§‹è¯•åˆ†é…
<ol type="1">
<li><code>Available -= Request_i</code></li>
<li><code>Allocation[i] += Request_i</code></li>
<li><code>Need[i] -= Request_i</code></li>
</ol></li>
<li>å…è®¸å®‰å…¨æ€§æ£€æµ‹ç®—æ³•</li>
<li>è‹¥ç¬¬4æ­¥å¾—åˆ°äº†ä¸€ä¸ªå®‰å…¨çš„è°ƒåº¦åºåˆ—ï¼Œåˆ™è§†ä½œå®‰å…¨ï¼Œåˆ†é…å†…å­˜ï¼Œå¦åˆ™æ’¤é”€è¯¥æ¬¡é¢„åˆ†é…</li>
</ol>
<h5 id="å®‰å…¨æ€§æ£€æµ‹">å®‰å…¨æ€§æ£€æµ‹</h5>
<p>åœ¨è¿™ä¸€æ­¥ä¸­æˆ‘ä»¬å°†ä¼šå¼•å…¥ä¸¤ä¸ªå‘é‡ï¼Œåˆ†åˆ«ä¸º</p>
<ul>
<li><code>work</code>å‘é‡ï¼Œé•¿åº¦ä¸ºnï¼Œå…¶ä½œä¸º<code>Available</code>çš„ä¸€ä¸ªæ›¿èº«</li>
<li><code>finish</code>å‘é‡ï¼Œé•¿åº¦ä¸ºmï¼Œå…¶ç”¨äºæ ‡è®°å„è¿›ç¨‹çš„æ»¡è¶³æƒ…å†µï¼Œåˆå§‹åŒ–ä¸ºå…¨<code>false</code></li>
</ul>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æŒ‰ç…§å¦‚ä¸‹çš„æ–¹å¼æ¥å¯¹<code>finish</code>è¿›è¡Œè¿­ä»£<br />
1. æ‰¾åˆ°ä¸€ä¸ªåŒæ—¶æ»¡è¶³<code>finish[i] = false</code>ä¸”<code>Need[i] &lt; work</code>çš„è¿›ç¨‹<code>i</code>ï¼Œå‡å®šå…¶å¾ˆå¿«å°±ä¼šå®Œæˆä»–çš„å·¥ä½œå¹¶å½’è¿˜èµ„æºï¼Œç„¶åè¿›è¡Œ<code>work += Allocation[i]</code>å’Œ<code>finish[i] = true</code>ï¼Œè‹¥æ‰¾ä¸åˆ°ï¼Œåˆ™åˆ°ç¬¬3æ­¥ 2. å›åˆ°ç¬¬1æ­¥ 3. å¦‚æœ<code>finish</code>å…¨éƒ¨ä¸º<code>true</code>åˆ™è¯´æ˜å®‰å…¨ï¼Œåä¹‹åˆ™ä¸ºä¸å®‰å…¨</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å¯¹äºå¸¸è§„æ¡ä»¶ä¸‹çš„æ­»é”é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜ä¼šæœ‰å¾ˆå¤šçš„è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ä¸Šé¢æåˆ°çš„å“²å­¦å®¶æ­»é”é—®é¢˜ï¼ŒåŒæ ·ä¹Ÿè¿˜æœ‰å…¶ä»–çš„è§£æ³•ï¼Œæœ¬æ–‡çš„ç›®çš„åªåœ¨äºä»‹ç»æ­»é”é—®é¢˜å’Œé“¶è¡Œå®¶ç®—æ³•ã€‚</p>
]]></content>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
        <tag>å¤šçº¿ç¨‹</tag>
      </tags>
  </entry>
</search>
